// engine/i18n/i18n.js
// Базовый каркас i18n для WebKurierCore

// текущий язык (по умолчанию английский)
let WK_LANG = 'en';

// простейший словарь-заглушка (потом расширим)
const WK_I18N_DICT = {
  en: {},
  de: {},
  ru: {},
  uk: {}
};

// применить переводы к странице (пока заглушка)
function wkApplyTranslations() {
  // здесь позже добавим поиск data-i18n ключей и подстановку текста
  // сейчас просто ничего не делаем, чтобы не ломать интерфейс
}

/**
 * Инициализация i18n.
 * Загружает язык из localStorage и применяет переводы.
 */
function i18nInit() {
  try {
    const saved = localStorage.getItem('WK_LANG');
    if (saved && WK_I18N_DICT[saved]) {
      WK_LANG = saved;
    }
  } catch (e) {
    // в режиме без localStorage просто игнорируем
  }

  wkApplyTranslations();
  console.log('i18nInit()', 'lang =', WK_LANG);
}

/**
 * Смена языка (каркас).
 */
function i18nSetLanguage(lang) {
  if (!WK_I18N_DICT[lang]) return;

  WK_LANG = lang;
  try {
    localStorage.setItem('WK_LANG', lang);
  } catch (e) {
    // ignore
  }
  wkApplyTranslations();
}

// Делаем функции глобальными для браузера
// чтобы их можно было вызвать из index.html и других скриптов
// и чтобы ESLint не ругался.
if (typeof window !== 'undefined') {
  window.i18nInit = i18nInit;
  window.i18nSetLanguage = i18nSetLanguage;
}
        