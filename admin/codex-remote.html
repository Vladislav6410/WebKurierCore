<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>WebKurierCore ¬∑ Codex Remote</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <style>
    :root{
      --bg:#020617;
      --text:#e5e7eb;
      --border:#243047;
      --btn:#0f172a;
      --btnBorder:#374151;
      --accent:#2563eb;
    }
    *{ box-sizing:border-box; }

    body{
      margin:0;
      padding:18px 14px 26px;
      font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
      background:radial-gradient(circle at top,#111827 0,#020617 55%);
      color:var(--text);
    }

    .wrap{ max-width:980px; margin:0 auto; }

    .title{ font-size:1.35rem; font-weight:700; margin-bottom:6px; }
    .sub{ opacity:.75; margin:0 0 14px; }

    .panel{
      border:1px solid var(--border);
      border-radius:14px;
      padding:12px;
      background:linear-gradient(145deg,#0b1120,#0f172a);
    }

    .row{ display:flex; flex-wrap:wrap; gap:10px; align-items:center; }

    .mini-btn{
      padding:10px 12px;
      border-radius:999px;
      border:1px solid var(--btnBorder);
      background:rgba(15,23,42,.95);
      color:inherit;
      cursor:pointer;
      display:inline-flex;
      align-items:center;
      gap:6px;
      font-size:.92rem;
      text-decoration:none;
      white-space:nowrap;
    }
    .mini-btn:hover{ border-color:var(--accent); }

    label{
      display:block;
      font-size:.82rem;
      opacity:.85;
      margin:10px 0 6px;
    }

    select, textarea, input{
      width:100%;
      border:1px solid var(--border);
      background:rgba(2,6,23,.35);
      color:inherit;
      border-radius:12px;
      padding:10px;
      outline:none;
    }

    textarea{
      min-height:110px;
      resize:vertical;
      line-height:1.35;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono","Courier New", monospace;
      font-size:.92rem;
    }

    .grid{
      display:grid;
      grid-template-columns: 1fr 190px 1fr;
      gap:12px;
      margin-top:10px;
    }
    @media (max-width:820px){
      .grid{ grid-template-columns:1fr; }
    }

    .status{
      margin-top:10px;
      border:1px solid var(--border);
      border-radius:12px;
      background:rgba(2,6,23,.35);
      padding:10px;
      white-space:pre-wrap;
      word-break:break-word;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono","Courier New", monospace;
      font-size:.92rem;
      opacity:.95;
    }
    .status.ok{ border-color:rgba(52,211,153,.35); }
    .status.bad{ border-color:rgba(251,113,133,.45); }

    .hint{
      margin-top:10px;
      opacity:.75;
      font-size:.9rem;
      line-height:1.35;
    }

    .small{
      opacity:.8;
      font-size:.85rem;
      margin-top:8px;
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="title">üß† Codex Remote (Mini)</div>
    <p class="sub">–û—Ç–¥–µ–ª—å–Ω–∞—è –ª—ë–≥–∫–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è Codex ‚Äî —É–¥–æ–±–Ω–æ —Å iPhone.</p>

    <div class="panel" id="codexMini">
      <div class="row">
        <a class="mini-btn" href="/admin/codex.html">üß† Codex Console</a>
        <a class="mini-btn" href="/admin/terminal.html">‚å®Ô∏è Terminal</a>
        <a class="mini-btn" href="/admin/logs.html">üìú Logs</a>
        <a class="mini-btn" href="/admin/status.html">üìä Status</a>

        <a class="mini-btn" id="btnOpenBranches" href="#" target="_blank" rel="noopener">üåø Open Branches</a>
        <button class="mini-btn" id="btnLastSessionMini">üßæ Last Codex Session</button>
        <button class="mini-btn" id="btnHealthMini">‚úÖ /health</button>
      </div>

      <div class="grid">
        <div>
          <label>–ì–æ—Ç–æ–≤–∞—è –∑–∞–¥–∞—á–∞ (–ø–∞–∫–µ—Ç—ã)</label>
          <select id="codexPackMini">
            <option value="">‚Äî –≤—ã–±—Ä–∞—Ç—å ‚Äî</option>

            <!-- Mini / Remote packs -->
            <option value="ping">[0] ping / smoke-test</option>
            <option value="scan_repo">[1] –ü—Ä–æ—Å–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∏ —Ç–æ—á–∫–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ Codex</option>
            <option value="add_codex_buttons">[2] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–Ω–æ–ø–∫–∏ Codex –Ω–∞ –≥–ª–∞–≤–Ω–æ–π</option>
            <option value="security_audit">[3] Security-gates + Chain-audit check</option>
            <option value="bugs_find">[4] –ù–∞–π—Ç–∏ –±–∏—Ç—ã–µ —Å—Å—ã–ª–∫–∏ /admin/*</option>
            <option value="report_status">[5] –ö–æ—Ä–æ—Ç–∫–∏–π –æ—Ç—á—ë—Ç ‚Äú—á—Ç–æ —Å–¥–µ–ª–∞–Ω–æ / —á—Ç–æ –¥–∞–ª—å—à–µ‚Äù</option>

            <option disabled>‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ</option>

            <!-- Console packs (shared from codex-ui.js) -->
            <option value="plan_run_api">[C1] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å /api/codex/run (stub)</option>
            <option value="secure_gate">[C2] Security gate (–±–ª–æ–∫ –æ–ø–∞—Å–Ω–æ–≥–æ)</option>
            <option value="smoke">[C3] Smoke check (health / ping)</option>
            <option value="agent_tiles">[C4] –ü–ª–∏—Ç–∫–∏ –∞–≥–µ–Ω—Ç–æ–≤ –∏–∑ agents_map.json</option>
            <option value="terminal_router">[C5] Terminal router commands_map.json</option>
          </select>

          <div class="row" style="margin-top:10px;">
            <button class="mini-btn" id="btnInsertPackMini">üì¶ –í—Å—Ç–∞–≤–∏—Ç—å</button>
            <button class="mini-btn" id="btnRunCodexMini">‚ñ∂ Run</button>
            <button class="mini-btn" id="btnCopyCurlMini">üìã Copy CURL</button>
            <button class="mini-btn" id="btnClearCodexMini">üßΩ –û—á–∏—Å—Ç–∏—Ç—å</button>
          </div>

          <div class="small" id="sessionLine">sessionId: ‚Äî</div>
        </div>

        <div>
          <label>Reasoning</label>
          <select id="codexReasonMini">
            <option value="low">low</option>
            <option value="medium" selected>medium</option>
            <option value="high">high</option>
            <option value="xhigh">xhigh</option>
          </select>

          <label style="margin-top:10px;">Server URL (–¥–ª—è CURL)</label>
          <input id="serverBaseMini" value="http://localhost:3000" />
          <div class="small">–ï—Å–ª–∏ —Å–µ—Ä–≤–µ—Ä –Ω–µ –ª–æ–∫–∞–ª—å–Ω—ã–π ‚Äî –≤—Å—Ç–∞–≤—å —Å–≤–æ–π –¥–æ–º–µ–Ω.</div>
        </div>

        <div>
          <label>taskText (–º–æ–∂–Ω–æ –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å)</label>
          <textarea id="codexTaskMini" placeholder="–í—ã–±–µ—Ä–∏ –ø–∞–∫–µ—Ç ‚Üí –í—Å—Ç–∞–≤–∏—Ç—å ‚Üí Run (–∏–ª–∏ –Ω–∞–ø–∏—à–∏ —Å–≤–æ—é –∑–∞–¥–∞—á—É)"></textarea>
        </div>
      </div>

      <div class="status" id="codexMiniOut">–ì–æ—Ç–æ–≤–æ. –ù–∞–∂–º–∏ ‚úÖ /health –∏–ª–∏ –≤—ã–±–µ—Ä–∏ –ø–∞–∫–µ—Ç ‚Üí Run.</div>

      <div class="hint">
        –ü–æ–¥—Å–∫–∞–∑–∫–∞: –µ—Å–ª–∏ Run –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç ‚Äî —Å–Ω–∞—á–∞–ª–∞ –æ—Ç–∫—Ä–æ–π <b>/admin/codex.html</b> –∏ —É–±–µ–¥–∏—Å—å, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ <b>/api/codex/run</b>.
      </div>
    </div>
  </div>

  <!-- ‚úÖ shared logic first -->
  <script src="codex-ui.js"></script>
  <!-- ‚úÖ thin init after -->
  <script src="codex-remote.js"></script>
</body>
</html>