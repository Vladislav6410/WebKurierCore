<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>WebKurierCore · Admin Terminal</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    body {
      margin: 0;
      padding: 20px 16px 40px;
      font-family: 'Courier New', Courier, monospace;
      background-color: #020617;
      color: #e5e7eb;
    }
    main { max-width: 960px; margin: 0 auto; }
    .card {
      border-radius: 12px;
      border: 1px solid #1f2937;
      padding: 18px 20px;
      background: linear-gradient(145deg, #020617, #020617 55%, #0b1120);
      box-shadow: 0 16px 40px rgba(0,0,0,0.55);
      margin-top: 20px;
    }
    h1 { font-size: 1.7rem; margin-bottom: .5rem; }
    p { line-height: 1.6; }
    a { color: #60a5fa; text-decoration: none; }
    .terminal {
      background-color: #000;
      color: #00ff00;
      font-family: 'Courier New', monospace;
      padding: 16px;
      margin-top: 10px;
      min-height: 260px;
      overflow-y: auto;
      border-radius: 10px;
      border: 1px solid #444;
      white-space: pre-wrap;
      text-align: left;
      box-shadow: 0 2px 10px rgba(0,0,0,0.2);
    }
    #terminal-input {
      display: block;
      margin: 12px 0 0 0;
      width: 100%;
      font-size: 14px;
      padding: 8px 10px;
      border-radius: 6px;
      border: 1px solid #aaa;
      background-color: #020617;
      color: #f4f4f4;
    }
    .note {
      font-size: 0.85rem;
      opacity: 0.7;
      margin-top: 8px;
    }
  </style>
</head>
<body>
<main>
  <section class="card">
    <h1>Admin Terminal · WebKurierCore</h1>
    <p>
      Это админ-консоль для инженера. Здесь будут команды управления модулями,
      просмотр логов и доступ к “мозгу” проекта WebKurier.
    </p>
    <p class="note">
      Рекомендуется закрывать доступ через WebKurierSecurity (IP белый список, токены, 2FA).
    </p>
    <p>
      ← <a href="../index.html">Назад в портал WebKurierCore</a>
    </p>

    <div id="terminal" class="terminal"></div>
    <input
      id="terminal-input"
      type="text"
      placeholder="admin@webkurier:~$ введите команду..."
    />
  </section>
</main>

<script>
  (function() {
    const term = document.getElementById('terminal');
    const input = document.getElementById('terminal-input');

    function println(text) {
      if (!term) return;
      term.textContent += text + '\\n';
      term.scrollTop = term.scrollHeight;
    }

    async function execBackend(command) {
      // Заглушка: здесь позже будет запрос к backend (Hybrid/Security)
      // пример:
      // const res = await fetch('/api/admin/terminal', { method:'POST', body: JSON.stringify({ cmd: command }) })
      // const data = await res.json();
      // return data.output;
      return '(demo) backend ещё не подключён: ' + command;
    }

    async function handleCommand(cmd) {
      const trimmed = cmd.trim();
      if (!trimmed) return;

      println('admin@webkurier:~$ ' + trimmed);

      const [baseRaw, ...args] = trimmed.split(/\\s+/);
      const base = baseRaw.toLowerCase();

      switch (base) {
        case 'help':
          println('Команды терминала (демо):');
          println('  help            - показать это сообщение');
          println('  ping            - ping backend');
          println('  modules         - показать список модулей');
          println('  logs            - показать пример логов');
          println('  exit            - вернуться на главную');
          println('');
          break;

        case 'ping':
          println('pong (local)');
          println('');
          break;

        case 'exit':
          println('Выход в портал WebKurierCore...');
          setTimeout(() => { window.location.href = '../index.html'; }, 400);
          break;

        case 'modules':
          println('Модули (пример): Hybrid, Core, DroneHybrid, Chain, Security, PhoneCore, iOS, Android, Site');
          println('');
          break;

        case 'logs':
          println('[INFO] Example log entry 1');
          println('[INFO] Example log entry 2');
          println('');
          break;

        default:
          // здесь можно подключать реальный backend
          const out = await execBackend(trimmed);
          println(out);
          println('');
      }
    }

    if (term) {
      println('Welcome to WebKurierCore Admin Terminal');
      println('Введите "help" для списка команд.');
      println('');
    }

    if (input) {
      input.addEventListener('keydown', (e) => {
        if (e.key === 'Enter') {
          e.preventDefault();
          const value = input.value;
          input.value = '';
          handleCommand(value);
        }
      });
    }
  })();
</script>
</body>
</html>