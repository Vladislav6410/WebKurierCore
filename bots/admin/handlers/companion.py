from aiogram import Router, F
from aiogram.types import Message

router = Router()

# –ü–æ–∑–∂–µ —ç—Ç–æ –∑–∞–≤–µ–¥—ë–º –≤ WDA job: repo_tree_check / lint / tests / read_logs
BUTTON_TO_COMMAND = {
    "‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø—Ä–æ–µ–∫—Ç–∞": "/desk check core",
    "üßπ –ó–∞–ø—É—Å—Ç–∏—Ç—å –ª–∏–Ω—Ç–µ—Ä": "/desk lint core",
    "üß™ –ü—Ä–æ–≥–Ω–∞—Ç—å —Ç–µ—Å—Ç—ã": "/desk test core",
    "üìú –ü–æ–∫–∞–∑–∞—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ –ª–æ–≥–∏": "/desk logs",
    "‚ÑπÔ∏è –°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã": "/status",
}

@router.message(F.text.in_(BUTTON_TO_COMMAND.keys()))
async def companion_buttons(message: Message):
    cmd = BUTTON_TO_COMMAND[message.text]

    # –í–∞—Ä–∏–∞–Ω—Ç 1 (—Å–∞–º—ã–π –±—ã—Å—Ç—Ä—ã–π): –ø—Ä–æ—Å—Ç–æ ‚Äú–ø—Ä–æ–±—Ä–æ—Å–∏—Ç—å‚Äù –∫–∞–∫ —Ç–µ–∫—Å—Ç-–∫–æ–º–∞–Ω–¥—É –≤ —Ç–≤–æ–π –∂–µ —Ä–æ—É—Ç–µ—Ä
    # (–ï—Å–ª–∏ —É —Ç–µ–±—è —É–∂–µ –µ—Å—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ /desk, /status –∏ —Ç.–¥.)
    await message.answer(f"‚ñ∂Ô∏è –í—ã–ø–æ–ª–Ω—è—é: {cmd}")
    # –¢—É—Ç –º–æ–∂–Ω–æ –≤—ã–∑–≤–∞—Ç—å –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π dispatch, –Ω–æ —á–∞—â–µ –ø—Ä–æ—â–µ –≤—ã–∑–≤–∞—Ç—å —Å–µ—Ä–≤–∏—Å –Ω–∞–ø—Ä—è–º—É—é.
    # –ü–æ–∫–∞ –ø—Ä–æ—Å—Ç–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –∫–æ–º–∞–Ω–¥—É, –∞ —Å–ª–µ–¥—É—é—â–∏–π —à–∞–≥ ‚Äî —Å–≤—è–∑–∫–∞ —Å core_api/WDA.