<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>WebKurierDroneHybrid ¬∑ Geodesy & 3D Suite</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    body {
      margin: 0;
      padding: 20px 16px 40px;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: radial-gradient(circle at top, #111827 0, #020617 55%);
      color: #e5e7eb;
    }
    main {
      max-width: 1080px;
      margin: 0 auto;
    }
    .card {
      background: linear-gradient(145deg, #020617, #020617 55%, #0b1120);
      border: 1px solid #1f2937;
      border-radius: 16px;
      padding: 20px 22px;
      box-shadow: 0 16px 40px rgba(0,0,0,0.55);
      margin-top: 22px;
    }
    h1 { font-size: 2rem; margin-bottom: .5rem; }
    h2 { font-size: 1.4rem; margin-bottom: .5rem; margin-top: .3rem; }
    p.tagline { color: #9ca3af; margin-bottom: 1rem; }
    table {
      border-collapse: collapse;
      width: 100%;
      margin-top: 10px;
      font-size: .92rem;
    }
    th, td {
      border: 1px solid rgba(31,41,55,0.9);
      padding: 8px 10px;
      text-align: left;
    }
    th { color: #9ca3af; }
    .price { font-weight: 700; color: #facc15; }
    pre {
      background: #020617;
      border: 1px solid rgba(31,41,55,0.95);
      padding: 16px;
      border-radius: 10px;
      font-family: "Fira Code", "JetBrains Mono", monospace;
      overflow-x: auto;
      font-size: .86rem;
      margin-top: 10px;
      white-space: pre;
    }
    .note {
      background: #0b1120;
      border-left: 3px solid #3b82f6;
      padding: 10px 12px;
      margin-top: 10px;
      color: #9ca3af;
      font-size: .9rem;
    }
    a { color: #60a5fa; text-decoration: none; }
  </style>
</head>
<body>
<main>

  <section class="card">
    <h1>WebKurierDroneHybrid ¬∑ Geodesy &amp; 3D Suite</h1>
    <p class="tagline">
      –ü—Ä–∞–π—Å –Ω–∞ –∞—ç—Ä–æ—Ñ–æ—Ç–æ—Å—ä—ë–º–∫—É 1 –∫–º¬≤, Python-–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä PDF-–æ—Ç—á—ë—Ç–æ–≤ –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–ø–æ–∫
      –º–æ–¥—É–ª—è –≥–µ–æ–¥–µ–∑–∏–∏. –≠—Ç–æ—Ç —Ñ–∞–π–ª –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–∞–∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –∏ –±–∞–∑—É –¥–ª—è README.
    </p>
    <p>
      –í–µ—Ä–Ω—É—Ç—å—Å—è –≤ —è–¥—Ä–æ WebKurierCore: <a href="../index.html">index.html</a>
    </p>
  </section>

  <section class="card">
    <h2>üìä –ü—Ä–∞–π—Å –Ω–∞ –∞—ç—Ä–æ—Ñ–æ—Ç–æ—Å—ä—ë–º–∫—É (1 –∫–º¬≤)</h2>
    <p>–ë–∞–∑–æ–≤—ã–µ –ø–∞–∫–µ—Ç—ã –¥–ª—è WebKurierDroneHybrid (–≥–µ–æ–¥–µ–∑–∏—è, 3D-–º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ, –∞–Ω–∞–ª–∏—Ç–∏–∫–∞):</p>
    <table>
      <thead>
        <tr>
          <th>‚Ññ</th>
          <th>–ü–∞–∫–µ—Ç</th>
          <th>–û–ø–∏—Å–∞–Ω–∏–µ</th>
          <th>–¶–µ–Ω–∞</th>
          <th>–°—Ä–æ–∫</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>1</td>
          <td><b>Base Map</b></td>
          <td>–û—Ä—Ç–æ—Ñ–æ—Ç–æ (GeoTIFF, JPG), –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ, –±–∞–∑–æ–≤–∞—è —Ñ–æ—Ç–æ–≥—Ä–∞–º–º–µ—Ç—Ä–∏—è, PDF-–∫–∞—Ä—Ç–∞ —É—á–∞—Å—Ç–∫–∞.</td>
          <td class="price">390&nbsp;‚Ç¨</td>
          <td>1‚Äì2 –¥–Ω—è</td>
        </tr>
        <tr>
          <td>2</td>
          <td><b>3D Terrain</b></td>
          <td>DSM/DTM, –æ–±–ª–∞–∫–æ —Ç–æ—á–µ–∫, 3D-–º–æ–¥–µ–ª—å (OBJ/PLY/LAS), –∞–Ω–∞–ª–∏–∑ —Ä–µ–ª—å–µ—Ñ–∞.</td>
          <td class="price">790&nbsp;‚Ç¨</td>
          <td>2‚Äì3 –¥–Ω—è</td>
        </tr>
        <tr>
          <td>3</td>
          <td><b>GeoAnalysis</b></td>
          <td>NDVI/NDRE, –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –∑–µ–º–µ–ª—å, –∫–æ–Ω—Ç—É—Ä—ã –æ–±—ä–µ–∫—Ç–æ–≤, —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π PDF-–æ—Ç—á—ë—Ç.</td>
          <td class="price">1290&nbsp;‚Ç¨</td>
          <td>3‚Äì5 –¥–Ω–µ–π</td>
        </tr>
      </tbody>
    </table>

    <div class="note">
      –¢–∞–±–ª–∏—Ü–∞ —Ü–µ–Ω —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏<br/>
      <code>WebKurierDroneHybrid/data/pricing/drone_prices.csv</code><br/>
      –∏ –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –±–æ—Ç–æ–º-–≥–µ–æ–¥–µ–∑–∏—Å—Ç–æ–º –∏ WebKurierSite.
    </div>
  </section>

  <section class="card">
    <h2>üêç Python-–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –≥–µ–æ–æ—Ç—á—ë—Ç–∞ (PDF)</h2>
    <p>
      –°–∫—Ä–∏–ø—Ç —Ä–∞–∑–º–µ—â–∞–µ—Ç—Å—è –≤ <code>WebKurierDroneHybrid</code> –ø–æ –ø—É—Ç–∏:<br/>
      <code>engine/geodesy_suite/report/report_generator.py</code>
    </p>
    <pre>import os
import json
from datetime import datetime
from fpdf import FPDF

BASE_DIR   = os.path.dirname(__file__)
ROOT_DIR   = os.path.abspath(os.path.join(BASE_DIR, "..", ".."))
DATA_DIR   = os.path.join(ROOT_DIR, "logs", "reports")
OUTPUT_DIR = os.path.join(ROOT_DIR, "logs", "generated")
FONT_DIR   = os.path.join(ROOT_DIR, "fonts")  # DejaVuSans / DejaVuSans-Bold

class GeoReport:
    def __init__(self, mission_name: str):
        self.mission_name = mission_name
        self.date = datetime.now().strftime("%Y-%m-%d %H:%M")
        self.report: dict = {}

    def load_data(self) -> None:
        file_path = os.path.join(DATA_DIR, f"{self.mission_name}.json")
        if not os.path.exists(file_path):
            raise FileNotFoundError(f"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –æ—Ç—á—ë—Ç–∞: {file_path}")
        with open(file_path, "r", encoding="utf-8") as f:
            self.report = json.load(f)

    def _init_pdf(self) -> FPDF:
        pdf = FPDF()
        pdf.add_page()
        pdf.add_font("DejaVu", "", os.path.join(FONT_DIR, "DejaVuSans.ttf"), uni=True)
        pdf.add_font("DejaVu", "B", os.path.join(FONT_DIR, "DejaVuSans-Bold.ttf"), uni=True)
        pdf.set_auto_page_break(auto=True, margin=15)
        return pdf

    def generate_pdf(self) -> str:
        pdf = self._init_pdf()
        pdf.set_font("DejaVu", "B", 16)
        pdf.cell(0, 10, f"üìç –ì–µ–æ–æ—Ç—á—ë—Ç: {self.mission_name}", ln=True)

        pdf.set_font("DejaVu", "", 11)
        pdf.cell(0, 8, f"–î–∞—Ç–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏: {self.date}", ln=True)
        pdf.ln(4)

        for key, value in self.report.items():
            if isinstance(value, dict):
                pdf.set_font("DejaVu", "B", 12)
                pdf.cell(0, 8, f"‚ñå {key}", ln=True)
                pdf.set_font("DejaVu", "", 11)
                for subkey, subvalue in value.items():
                    pdf.multi_cell(0, 6, f" ‚Ä¢ {subkey}: {subvalue}")
            else:
                pdf.multi_cell(0, 6, f"{key}: {value}")
            pdf.ln(1)

        os.makedirs(OUTPUT_DIR, exist_ok=True)
        output_path = os.path.join(OUTPUT_DIR, f"{self.mission_name}_report.pdf")
        pdf.output(output_path)
        return output_path

if __name__ == "__main__":
    report = GeoReport("test_mission_01")
    report.load_data()
    path = report.generate_pdf()
    print(f"‚úÖ –û—Ç—á—ë—Ç —Å–æ—Ö—Ä–∞–Ω—ë–Ω: {path}")</pre>

    <div class="note">
      –î–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ä—É—Å—Å–∫–æ–≥–æ –∏ –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ —Ç–µ–∫—Å—Ç–æ–≤
      –∏—Å–ø–æ–ª—å–∑—É–µ–º —à—Ä–∏—Ñ—Ç—ã <code>DejaVuSans</code> –∏ <code>DejaVuSans-Bold</code>.
    </div>
  </section>

  <section class="card">
    <h2>üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–ø–æ–∫ (Geodesy &amp; 3D Suite)</h2>
    <pre>WebKurierDroneHybrid/
‚îú‚îÄ‚îÄ engine/
‚îÇ   ‚îú‚îÄ‚îÄ geodesy_suite/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ report/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ report_generator.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ processing/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ odm_pipeline.py
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dsm_dtm_builder.py
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ndvi_ndre_analyzer.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ui/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ geodesy_api.py
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ telegram_bot_hooks.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ config/
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ geodesy_config.json
‚îÇ   ‚îú‚îÄ‚îÄ logs/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ reports/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ generated/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ telemetry/
‚îÇ   ‚îî‚îÄ‚îÄ prompts/
‚îÇ       ‚îú‚îÄ‚îÄ geodesy.prompt.json
‚îÇ       ‚îî‚îÄ‚îÄ report.prompt.json
‚îú‚îÄ‚îÄ data/
‚îÇ   ‚îú‚îÄ‚îÄ pricing/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ drone_prices.csv
‚îÇ   ‚îî‚îÄ‚îÄ cameras.json
‚îî‚îÄ‚îÄ docs/
    ‚îî‚îÄ‚îÄ geodesy.html</pre>
  </section>

</main>
</body>
</html>