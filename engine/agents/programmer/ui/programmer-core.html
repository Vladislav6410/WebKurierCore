<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>üíª –ê–≥–µ–Ω—Ç: –ü—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç</title>

  <!-- –í–∞–∂–Ω–æ: —ç—Ç–æ—Ç —Ñ–∞–π–ª –¥–æ–ª–∂–µ–Ω —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å –≤ –≠–¢–û–ô –ñ–ï –ø–∞–ø–∫–µ -->
  <script type="module" src="./programmer-agent.js"></script>

  <style>
    :root{
      --bg:#0b0f14; --panel:#101826; --line:#1f2b3a; --text:#e8eef6; --muted:#9fb0c2;
      --btn:#162233; --btnDanger:#2a1a1a;
    }
    body{
      margin:0;
      padding:16px;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
      background: var(--bg);
      color: var(--text);
    }
    .wrap{max-width:1100px;margin:0 auto;}
    h1{margin:0 0 10px 0;font-size:20px}
    .hint{color:var(--muted);font-size:12px;margin-bottom:10px}
    .row{display:flex;gap:10px;flex-wrap:wrap;align-items:center;margin:10px 0;}
    button{
      border:1px solid #24344a;
      background: var(--btn);
      color: var(--text);
      padding:8px 12px;
      border-radius:12px;
      cursor:pointer;
      font-weight:600;
    }
    button.danger{background:var(--btnDanger);border-color:#5a2b2b;color:#ffd6d6;}
    textarea{
      width:100%;
      min-height:90px;
      background: var(--panel);
      color: var(--text);
      border:1px solid var(--line);
      border-radius:12px;
      padding:10px;
      resize:vertical;
      outline:none;
    }
    #output{
      margin-top:14px;
      background: var(--panel);
      border:1px solid var(--line);
      padding:12px;
      border-radius:12px;
      white-space: pre-wrap;
      min-height: 180px;
    }
  </style>
</head>

<body>
  <div class="wrap">
    <h1>üíª –ê–≥–µ–Ω—Ç-–ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç</h1>
    <div class="hint">
      –ö–æ–º–∞–Ω–¥—ã –∏–∑ Web-—Ç–µ—Ä–º–∏–Ω–∞–ª–∞ (–µ—Å–ª–∏ –ø–æ–¥–∫–ª—é—á–∏–ª bridge): <b>/programmer</b>, <b>/programmer open &lt;file&gt;</b>, <b>/programmer diff</b>, <b>/programmer apply</b>, <b>/programmer run</b>
    </div>

    <div class="row">
      <button onclick="window.ProgrammerAgent?.generateCode()">üß† –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å HTML</button>
      <button onclick="window.ProgrammerAgent?.fixBugs()">üõ† –ü—Ä–æ–≤–µ—Ä–∏—Ç—å/–∏—Å–ø—Ä–∞–≤–∏—Ç—å</button>
      <button onclick="window.ProgrammerAgent?.applyPatchWDA()">‚úÖ Apply (WDA)</button>
      <button onclick="document.getElementById('prompt').value=''; window.__WK_PROGRAMMER_PRINT__?.('üßπ –û—á–∏—â–µ–Ω–æ.');" class="danger">üßπ Clear</button>
    </div>

    <div class="hint">–ó–∞–¥–∞—á–∞/–æ–ø–∏—Å–∞–Ω–∏–µ:</div>
    <textarea id="prompt" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: '–ò—Å–ø—Ä–∞–≤—å –æ—à–∏–±–∫—É –≤ programmer-ui.js, –¥–æ–±–∞–≤—å –∫–Ω–æ–ø–∫—É Apply —á–µ—Ä–µ–∑ WDA‚Ä¶'"></textarea>

    <div id="output">–ì–æ—Ç–æ–≤ ‚úÖ</div>
  </div>

  <script>
    // UI –≤—ã–≤–æ–¥ (ProgrammerAgent –ø–∏—à–µ—Ç —Å—é–¥–∞)
    window.__WK_PROGRAMMER_PRINT__ = (text) => {
      const out = document.getElementById("output");
      if (out) out.textContent = String(text ?? "");
    };
  </script>
</body>
</html>