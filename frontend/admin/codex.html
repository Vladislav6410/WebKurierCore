<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>WebKurierCore ¬∑ Codex Console</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <style>
    :root{
      --bg:#020617;
      --card:#0b1120;
      --card2:#0f172a;
      --text:#e5e7eb;
      --muted:#9ca3af;
      --border:#243047;
      --accent:#60a5fa;
      --ok:#34d399;
      --bad:#fb7185;
      --btn:#111827;
      --btn2:#0b1222;
    }
    *{ box-sizing:border-box; }
    body{
      margin:0;
      font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
      background:radial-gradient(circle at top,#111827 0,#020617 55%);
      color:var(--text);
    }
    .page{
      max-width:1120px;
      margin:0 auto;
      padding:18px 14px 40px;
    }
    .header{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:12px;
      margin-bottom:14px;
    }
    .title{
      font-size:1.35rem;
      font-weight:800;
      letter-spacing:.2px;
    }
    .subtitle{
      margin-top:6px;
      color:var(--muted);
      max-width:760px;
      line-height:1.35;
      font-size:.95rem;
    }
    .card{
      border:1px solid var(--border);
      border-radius:14px;
      background:linear-gradient(145deg,var(--card),var(--card2));
      padding:12px;
      box-shadow:0 16px 40px rgba(0,0,0,.45);
      margin-top:12px;
    }
    .grid{
      display:grid;
      grid-template-columns: 1.1fr .9fr;
      gap:12px;
      margin-top:12px;
    }
    @media (max-width:920px){
      .grid{ grid-template-columns:1fr; }
    }
    .row{
      display:flex;
      flex-wrap:wrap;
      gap:10px;
      align-items:center;
    }
    .btn{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:10px 12px;
      border-radius:12px;
      border:1px solid var(--border);
      background:rgba(15,23,42,.85);
      color:var(--text);
      cursor:pointer;
      text-decoration:none;
      user-select:none;
      font-size:.92rem;
      line-height:1;
      white-space:nowrap;
    }
    .btn:hover{ border-color:var(--accent); }
    .btn.secondary{ background:rgba(2,6,23,.65); }
    .btn.ok{ border-color:rgba(52,211,153,.35); }
    .btn.bad{ border-color:rgba(251,113,133,.45); }
    .pill{
      display:inline-flex;
      gap:8px;
      align-items:center;
      border:1px solid var(--border);
      border-radius:999px;
      padding:8px 10px;
      background:rgba(2,6,23,.35);
      color:var(--muted);
      font-size:.85rem;
    }
    label{
      color:var(--muted);
      font-size:.85rem;
      display:block;
      margin-bottom:6px;
    }
    select, input, textarea{
      width:100%;
      border:1px solid var(--border);
      background:rgba(2,6,23,.35);
      color:var(--text);
      border-radius:12px;
      padding:10px 10px;
      outline:none;
      font-size:.95rem;
    }
    textarea{
      min-height:190px;
      resize:vertical;
      line-height:1.35;
    }
    .split{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:10px;
    }
    @media (max-width:620px){
      .split{ grid-template-columns:1fr; }
    }
    .mono{
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size:.9rem;
    }
    .statusLine{
      margin-top:10px;
      padding:10px 12px;
      border-radius:12px;
      border:1px solid var(--border);
      background:rgba(2,6,23,.35);
      color:var(--muted);
      line-height:1.35;
      white-space:pre-wrap;
      word-break:break-word;
    }
    .statusOk{ border-color:rgba(52,211,153,.35); color:#bbf7d0; }
    .statusBad{ border-color:rgba(251,113,133,.45); color:#fecaca; }
    .smallNote{
      color:var(--muted);
      font-size:.82rem;
      margin-top:8px;
      line-height:1.35;
    }
    .kbd{
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      border:1px solid var(--border);
      background:rgba(2,6,23,.45);
      padding:2px 6px;
      border-radius:8px;
      font-size:.82rem;
      color:var(--text);
    }
  </style>
</head>

<body>
  <div class="page">
    <div class="header">
      <div>
        <div class="title">WebKurierCore ¬∑ Codex Console</div>
        <div class="subtitle">
          –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Codex —á–µ—Ä–µ–∑ WebKurierCore: –æ—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–¥–∞—á, –ø—Ä–æ–≤–µ—Ä–∫–∞ <span class="kbd">/health</span>,
          –±—ã—Å—Ç—Ä—ã–µ –∫–Ω–æ–ø–∫–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –∏ –≥–æ—Ç–æ–≤—ã–µ ‚Äú–ø–∞–∫–µ—Ç—ã –∑–∞–¥–∞—á‚Äù.
        </div>
      </div>

      <a class="btn secondary" href="/" title="–í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –ø–æ—Ä—Ç–∞–ª –∞–≥–µ–Ω—Ç–æ–≤">‚Üê –ù–∞ –ø–æ—Ä—Ç–∞–ª</a>
    </div>

    <div class="card">
      <div class="row">
        <span class="pill">API: <span class="mono" id="apiBase">/api/codex/run</span></span>
        <span class="pill">Session: <span class="mono" id="sessionIdView">‚Äî</span></span>
        <span class="pill">Last HTTP: <span class="mono" id="lastHttp">‚Äî</span></span>
      </div>

      <div class="grid">
        <!-- LEFT: TASK INPUT -->
        <div class="card" style="margin-top:12px;">
          <div class="split">
            <div>
              <label>Reasoning</label>
              <select id="reasoning">
                <option value="low">low (–±—ã—Å—Ç—Ä–æ)</option>
                <option value="medium" selected>medium (—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ)</option>
                <option value="high">high (—Å–ª–æ–∂–Ω—ã–µ –∑–∞–¥–∞—á–∏)</option>
                <option value="xhigh">xhigh (—Å–∞–º—ã–µ —Å–ª–æ–∂–Ω—ã–µ)</option>
              </select>
            </div>
            <div>
              <label>–ì–æ—Ç–æ–≤–∞—è –∑–∞–¥–∞—á–∞ (–ø–∞–∫–µ—Ç—ã)</label>
              <select id="taskPack">
                <option value="">‚Äî –≤—ã–±—Ä–∞—Ç—å ‚Äî</option>
                <option value="ping">[0] ping / smoke-test</option>
                <option value="scan_repo">[1] –ü—Ä–æ—Å–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∏ –Ω–∞–π—Ç–∏ —Ç–æ—á–∫–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ Codex</option>
                <option value="add_codex_buttons">[2] –î–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫–∏ Codex –≤ –ø–æ—Ä—Ç–∞–ª (index.html)</option>
                <option value="chain_audit_check">[3] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Chain-–∞—É–¥–∏—Ç (auditEvent) –∏ –ª–æ–≥–∏</option>
                <option value="security_gate_check">[4] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å security-gates allowlist/denylist</option>
                <option value="ui_console_check">[5] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å codex.html + UX —É–ª—É—á—à–µ–Ω–∏—è</option>
                <option value="i18n_check">[6] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å i18n/—è–∑—ã–∫–æ–≤—ã–µ –∫–Ω–æ–ø–∫–∏ –∏ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å</option>
                <option value="terminal_hook_plan">[7] –ü–ª–∞–Ω –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ Codex –≤ Admin Terminal</option>
                <option value="report_status">[8] –°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –∫–æ—Ä–æ—Ç–∫–∏–π –æ—Ç—á—ë—Ç: —á—Ç–æ —Å–¥–µ–ª–∞–Ω–æ/—á—Ç–æ –¥–∞–ª—å—à–µ</option>
                <option value="bugs_find">[9] –ù–∞–π—Ç–∏ –æ—à–∏–±–∫–∏/–±–∏—Ç—ã–µ —Å—Å—ã–ª–∫–∏ /admin/*</option>
              </select>
            </div>
          </div>

          <div style="margin-top:10px;">
            <label>–¢–µ–∫—Å—Ç –∑–∞–¥–∞—á–∏ (taskText)</label>
            <textarea id="taskText" class="mono" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 
1) –ù–∞–π–¥–∏ –≥–¥–µ –ø–æ–¥–∫–ª—é—á—ë–Ω registerCodexRunRoute 
2) –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ POST /api/codex/run —Ä–∞–±–æ—Ç–∞–µ—Ç
3) –°—Ñ–æ—Ä–º–∏—Ä—É–π –∫–æ—Ä–æ—Ç–∫–∏–π –æ—Ç—á—ë—Ç"></textarea>
            <div class="smallNote">
              –ü–æ–¥—Å–∫–∞–∑–∫–∞: –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ ‚Äî –≤—ã–±–µ—Ä–∏ –ø–∞–∫–µ—Ç <span class="kbd">[0] ping</span> –∏ –Ω–∞–∂–º–∏ ‚Äú‚ñ∂ –ó–∞–ø—É—Å—Ç–∏—Ç—å‚Äù.
            </div>
          </div>

          <div class="row" style="margin-top:10px;">
            <button class="btn ok" id="btnRun">‚ñ∂ –ó–∞–ø—É—Å—Ç–∏—Ç—å</button>
            <button class="btn secondary" id="btnUsePack">üì¶ –í—Å—Ç–∞–≤–∏—Ç—å –ø–∞–∫–µ—Ç</button>
            <button class="btn secondary" id="btnClear">üßΩ –û—á–∏—Å—Ç–∏—Ç—å</button>
            <button class="btn secondary" id="btnCopyCurl">üìã Copy CURL</button>
          </div>
        </div>

        <!-- RIGHT: REMOTE CONTROL (TV REMOTE) -->
        <div class="card" style="margin-top:12px;">
          <label>–ü—É–ª—å—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è (–±—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è)</label>

          <div class="row">
            <button class="btn" id="btnHealth">‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å /health</button>
            <a class="btn" href="/admin/terminal.html">‚å®Ô∏è –û—Ç–∫—Ä—ã—Ç—å —Ç–µ—Ä–º–∏–Ω–∞–ª</a>
            <a class="btn" href="/admin/logs.html">üìú –û—Ç–∫—Ä—ã—Ç—å –ª–æ–≥–∏</a>
            <a class="btn" href="/admin/status.html">üìä System Status</a>
          </div>

          <div class="card" style="margin-top:10px;">
            <label>GitHub –±—ã—Å—Ç—Ä—ã–µ —Å—Å—ã–ª–∫–∏ (–±–µ–∑ —Ç–æ–∫–µ–Ω–∞, –ø—Ä–æ—Å—Ç–æ –æ—Ç–∫—Ä—ã—Ç–∏–µ)</label>
            <div class="row">
              <input id="repoUrl" class="mono" placeholder="Repo URL, –Ω–∞–ø—Ä. https://github.com/Vladislav6410/WebKurierCore" />
              <button class="btn" id="btnOpenRepo">‚Üó –û—Ç–∫—Ä—ã—Ç—å Repo</button>
              <button class="btn" id="btnOpenPRs">‚Üó PRs</button>
              <button class="btn" id="btnOpenBranches">‚Üó Branches</button>
            </div>

            <div class="split" style="margin-top:10px;">
              <div>
                <label>–ò–º—è –≤–µ—Ç–∫–∏ (–¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è)</label>
                <input id="branchName" class="mono" placeholder="–Ω–∞–ø—Ä–∏–º–µ—Ä: codex/webkuriercore-..." />
              </div>
              <div>
                <label>–î–µ–π—Å—Ç–≤–∏–µ</label>
                <button class="btn bad" id="btnDeleteBranch">üóë –û—Ç–∫—Ä—ã—Ç—å —É–¥–∞–ª–µ–Ω–∏–µ –≤–µ—Ç–∫–∏</button>
              </div>
            </div>

            <div class="smallNote">
              –í–∞–∂–Ω–æ: —É–¥–∞–ª–µ–Ω–∏–µ –≤–µ—Ç–∫–∏ —Ç—Ä–µ–±—É–µ—Ç GitHub (—ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ). –≠—Ç–∞ –∫–Ω–æ–ø–∫–∞ –ø—Ä–æ—Å—Ç–æ –≤–µ–¥—ë—Ç –≤ –Ω—É–∂–Ω–æ–µ –º–µ—Å—Ç–æ, —á—Ç–æ–±—ã —Ç—ã –Ω–µ –∏—Å–∫–∞–ª.
            </div>
          </div>

          <div class="card" style="margin-top:10px;">
            <label>–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–¥–µ–ª–∞–Ω–Ω–æ–π —Ä–∞–±–æ—Ç—ã (–±—ã—Å—Ç—Ä–æ)</label>
            <div class="row">
              <button class="btn" id="btnReport">üßæ –û—Ç—á—ë—Ç ‚Äú—á—Ç–æ —Å–¥–µ–ª–∞–Ω–æ‚Äù</button>
              <button class="btn" id="btnFindBugs">ü™≤ –ù–∞–π—Ç–∏ –æ—à–∏–±–∫–∏/–±–∏—Ç—ã–µ —Å—Å—ã–ª–∫–∏</button>
              <button class="btn" id="btnAudit">üîê –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Security + Audit</button>
            </div>
          </div>
        </div>
      </div>

      <div class="card" style="margin-top:12px;">
        <label>–û—Ç–≤–µ—Ç Codex (output_text)</label>
        <div id="output" class="statusLine mono">‚Äî</div>
      </div>

      <div class="card" style="margin-top:12px;">
        <label>–°–∏—Å—Ç–µ–º–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è</label>
        <div id="sys" class="statusLine mono">‚Äî</div>
      </div>

    </div>
  </div>

  <script src="/admin/codex.js"></script>
</body>
</html>