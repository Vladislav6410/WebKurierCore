<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="description" content="WebKurier: Ñ‚ĞµÑ€Ğ¼Ğ¸Ğ½Ğ°Ğ», ĞºĞ¾ÑˆĞµĞ»Ñ‘Ğº, Ğ¾Ñ„Ğ»Ğ°Ğ¹Ğ½-Ğ´Ğ¾ÑÑ‚ÑƒĞ¿">
  <link rel="icon" href="favicon.ico" type="image/x-icon">
  <style>
    /* ...Ğ²ĞµÑÑŒ Ğ²Ğ°Ñˆ CSS Ğ±ĞµĞ· Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğ¹... */
    #tools-panel {
      display: none;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%,-50%);
      background: #fff;
      color: #222;
      border-radius: 12px;
      box-shadow: 0 6px 32px rgba(0,0,0,0.25);
      z-index: 10010;
      padding: 32px 24px 24px 24px;
      min-width: 340px;
      max-width: 90vw;
      min-height: 320px;
      max-height: 90vh;
      overflow: auto;
    }
    body.dark-theme #tools-panel {
      background: #222;
      color: #f4f4f4;
    }
    #tools-panel textarea, #tools-panel select, #tools-panel input[type="text"] {
      width: 100%;
      min-height: 40px;
      font-family: monospace;
      font-size: 15px;
      margin: 12px 0;
      border-radius: 8px;
      border: 1px solid #aaa;
      padding: 8px;
      background: #fafafa;
      color: #222;
      resize: vertical;
    }
    body.dark-theme #tools-panel textarea,
    body.dark-theme #tools-panel select,
    body.dark-theme #tools-panel input[type="text"] {
      background: #181818;
      color: #f4f4f4;
      border: 1px solid #555;
    }
    #tools-panel .panel-buttons {
      text-align: right;
      margin-top: 10px;
    }
    #tools-panel .panel-buttons button {
      margin-left: 8px;
      padding: 7px 16px;
      border-radius: 6px;
      border: none;
      background: #06c;
      color: white;
      font-size: 14px;
      cursor: pointer;
    }
    #tools-panel .panel-buttons button:hover {
      background: #0057a6;
    }
    #tools-panel input[type="file"] {
      display: none;
    }
    #tools-panel label {
      display: inline-block;
      margin-bottom: 8px;
      cursor: pointer;
      color: #06c;
      text-decoration: underline;
    }
    #tools-panel .close-btn {
      position: absolute;
      top: 8px;
      right: 12px;
      background: transparent;
      border: none;
      font-size: 22px;
      color: #888;
      cursor: pointer;
    }
    #tools-panel .close-btn:hover {
      color: #c00;
    }
  </style>
</head>
<body>
  <div id="preloader"><div class="loader"></div></div>

  <button class="toggle-theme" onclick="toggleTheme()">Ğ¡Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ Ñ‚ĞµĞ¼Ñƒ</button>

  <h1>ğŸŒ WebKurierCore</h1>
  <p>Ğ”Ğ¾Ğ±Ñ€Ğ¾ Ğ¿Ğ¾Ğ¶Ğ°Ğ»Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ² Ğ°Ğ²Ñ‚Ğ¾Ğ½Ğ¾Ğ¼Ğ½Ñ‹Ğ¹ Ğ¸Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹Ñ WebKurier: Ñ‚ĞµÑ€Ğ¼Ğ¸Ğ½Ğ°Ğ», ĞºĞ¾ÑˆĞµĞ»Ñ‘Ğº, Telegram-ÑĞ²ÑĞ·ÑŒ.</p>

  <!-- ĞšĞ¾ÑˆĞµĞ»Ñ‘Ğº -->
  <div class="wallet">
    <h2>ğŸ’° WebCoin-ĞºĞ¾ÑˆĞµĞ»Ñ‘Ğº</h2>
    <div class="balance" id="webcoin-balance">Ğ‘Ğ°Ğ»Ğ°Ğ½Ñ: 0 WKC</div>
    <button onclick="addCoins(10)">+10 WKC</button>
    <button onclick="resetCoins()">Ğ¡Ğ±Ñ€Ğ¾Ñ</button>
  </div>

  <!-- Ğ¢ĞµÑ€Ğ¼Ğ¸Ğ½Ğ°Ğ» -->
  <div class="terminal">
    <div>> WebKurier Terminal v1.0</div>
    <input type="text" id="terminal-input" placeholder="Ğ’Ğ²ĞµĞ´Ğ¸ ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ñƒ...">
    <div id="terminal-log"></div>
  </div>

  <!-- ĞšĞ½Ğ¾Ğ¿ĞºĞ¸ Ñ‚ĞµÑ€Ğ¼Ğ¸Ğ½Ğ°Ğ»Ğ° -->
  <div class="terminal-buttons">
    <button onclick="runTerminalCommand()">â ĞŸÑƒÑĞº</button>
    <button onclick="openFilePicker()">ğŸ“ Ğ¤Ğ°Ğ¹Ğ»Ñ‹</button>
    <button id="toolsButton">ğŸ›  Ğ˜Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚Ñ‹</button>
    <button onclick="copyTerminalInput()">ğŸ“‹ ĞšĞ¾Ğ¿Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ</button>
  </div>

  <!-- Telegram -->
  <h2>ğŸ”— Telegram</h2>
  <p><a href="https://t.me/WebKurierBot" target="_blank">@WebKurierBot</a></p>

  <!-- DreamMaker UI (Ğ¾ÑÑ‚Ğ°Ğ²Ğ»ĞµĞ½Ğ¾ ĞºĞ°Ğº ĞµÑÑ‚ÑŒ) -->
  <div id="screen"></div>
  <div id="preview-area"></div>
  <div id="chat"></div>
  <div class="chat-toolbar">
    <button id="btn-photo">ğŸ“·</button>
    <button id="btn-video">ğŸ</button>
    <button id="btn-audio">ğŸµ</button>
    <textarea id="chat-input" placeholder="Ğ¡ĞºĞ°Ğ¶Ğ¸ Ğ¸Ğ»Ğ¸ Ğ½Ğ°Ğ¿Ğ¸ÑˆĞ¸â€¦"></textarea>
    <button id="mic-btn">ğŸ¤</button>
    <button id="send-btn">â¤</button>
  </div>
<section class="tools-structure">
  <h2>ğŸ§° ĞœĞ¾Ğ´ÑƒĞ»ÑŒ Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚Ğ¾Ğ² WebKurierCore</h2>
  <p>ĞŸĞ°Ğ¿ĞºĞ° <code>engine/agents/tools/</code> ÑĞ¾Ğ´ĞµÑ€Ğ¶Ğ¸Ñ‚ UI-Ğ¿Ğ°Ğ½ĞµĞ»ÑŒ, ÑˆĞ°Ğ±Ğ»Ğ¾Ğ½Ñ‹, Ğ¿Ñ€ĞµĞ²ÑŒÑ Ğ¸ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‡Ğ¸ĞºĞ¸ Ğ´Ğ»Ñ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹ Ñ HTML-ĞºĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚Ğ¾Ğ¼.</p>

  <details open>
    <summary>ğŸ“ engine/agents/tools/</summary>
    <ul>
      <li>ğŸ“„ <strong>tools-agent.js</strong> â€” Ğ»Ğ¾Ğ³Ğ¸ĞºĞ° Ğ¿Ğ°Ğ½ĞµĞ»Ğ¸: Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ°, Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ, ÑĞºÑĞ¿Ğ¾Ñ€Ñ‚, Ğ²ÑÑ‚Ğ°Ğ²ĞºĞ° ÑˆĞ°Ğ±Ğ»Ğ¾Ğ½Ğ¾Ğ²</li>
      <li>ğŸ“„ <strong>tools-ui.js</strong> â€” Ğ¾Ñ‚Ñ€Ğ¸ÑĞ¾Ğ²ĞºĞ° Ğ¿Ğ°Ğ½ĞµĞ»Ğ¸ Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚Ğ¾Ğ², Ğ³Ğ°Ğ»ĞµÑ€ĞµÑ</li>
      <li>ğŸ“„ <strong>templates.json</strong> â€” ÑĞ¿Ğ¸ÑĞ¾Ğº HTML-ÑˆĞ°Ğ±Ğ»Ğ¾Ğ½Ğ¾Ğ² Ñ Ğ¾Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸ĞµĞ¼ Ğ¸ Ğ¿ÑƒÑ‚Ñ‘Ğ¼ Ğº Ğ¿Ñ€ĞµĞ²ÑŒÑ</li>
      <details>
        <summary>ğŸ“ previews/ â€” Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ñ Ğ´Ğ»Ñ ÑˆĞ°Ğ±Ğ»Ğ¾Ğ½Ğ¾Ğ²</summary>
        <ul>
          <li>ğŸ–¼ï¸ <strong>button.png</strong> â€” Ğ¿Ñ€ĞµĞ²ÑŒÑ ĞºĞ½Ğ¾Ğ¿ĞºĞ¸</li>
          <li>ğŸ–¼ï¸ <strong>heading.png</strong> â€” Ğ¿Ñ€ĞµĞ²ÑŒÑ Ğ·Ğ°Ğ³Ğ¾Ğ»Ğ¾Ğ²ĞºĞ°</li>
          <li>ğŸ–¼ï¸ <strong>columns.png</strong> â€” Ğ¿Ñ€ĞµĞ²ÑŒÑ Ğ´Ğ²ÑƒÑ… ĞºĞ¾Ğ»Ğ¾Ğ½Ğ¾Ğº</li>
          <li>ğŸ–¼ï¸ <strong>list.png</strong> â€” Ğ¿Ñ€ĞµĞ²ÑŒÑ ÑĞ¿Ğ¸ÑĞºĞ°</li>
          <li>ğŸ–¼ï¸ <strong>login.png</strong> â€” Ğ¿Ñ€ĞµĞ²ÑŒÑ Ñ„Ğ¾Ñ€Ğ¼Ñ‹ Ğ²Ñ…Ğ¾Ğ´Ğ°</li>
          <li>ğŸ–¼ï¸ <strong>preview-footer.jpg</strong> â€” ÑˆĞ°Ğ±Ğ»Ğ¾Ğ½ Ñ„ÑƒÑ‚ĞµÑ€Ğ°</li>
          <li>ğŸ–¼ï¸ <strong>preview-gallery.jpg</strong> â€” ÑˆĞ°Ğ±Ğ»Ğ¾Ğ½ Ğ³Ğ°Ğ»ĞµÑ€ĞµĞ¸ Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğ¹</li>
          <li>ğŸ–¼ï¸ <strong>preview-hero.jpg</strong> â€” Ğ¿Ñ€ĞµĞ²ÑŒÑ hero-Ğ±Ğ»Ğ¾ĞºĞ° (Ğ¿Ñ€Ğ¸Ğ²ĞµÑ‚ÑÑ‚Ğ²ĞµĞ½Ğ½Ñ‹Ğ¹ ÑĞºÑ€Ğ°Ğ½)</li>
        </ul>
      </details>
    </ul>
  </details>

  <h3>ğŸ“¦ Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ğ¸ Ğ¿Ğ°Ğ½ĞµĞ»Ğ¸ Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚Ğ¾Ğ²</h3>
  <ul>
    <li>ğŸ§± <strong>AI-Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ HTML</strong> â€” Ğ½Ğ° Ğ¾ÑĞ½Ğ¾Ğ²Ğµ Ñ‚ĞµĞºÑÑ‚Ğ¾Ğ²Ğ¾Ğ³Ğ¾ Ğ¾Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸Ñ</li>
    <li>ğŸ§© <strong>Ğ¨Ğ°Ğ±Ğ»Ğ¾Ğ½Ñ‹</strong> â€” Ğ¸Ğ· Ğ³Ğ°Ğ»ĞµÑ€ĞµĞ¸ Ğ±Ğ»Ğ¾ĞºĞ¾Ğ² Ñ Ğ¿Ñ€ĞµĞ²ÑŒÑ</li>
    <li>ğŸ¯ <strong>ĞŸĞ¾Ğ¸ÑĞº</strong> â€” Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ Ğ¿Ğ¾ Ğ½Ğ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ñ Ğ¸ Ğ¾Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸Ñ</li>
    <li>ğŸ—œï¸ <strong>HTML-Ğ¿Ñ€Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€</strong> â€” Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚ Ğ¿Ñ€ÑĞ¼Ğ¾ Ğ² Ğ¾ĞºĞ½Ğµ</li>
    <li>ğŸ“¤ <strong>Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ°</strong> â€” Ğ²ÑÑ‚Ğ°Ğ²ĞºĞ° ÑĞ²Ğ¾ĞµĞ³Ğ¾ HTML</li>
    <li>ğŸ’¾ <strong>Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ</strong> â€” ÑĞºÑĞ¿Ğ¾Ñ€Ñ‚ Ğ² .html</li>
    <li>ğŸ“¦ <strong>Ğ­ĞºÑĞ¿Ğ¾Ñ€Ñ‚ ZIP</strong> â€” Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ° Ğ² ZIP</li>
  </ul>
</section>
  <!-- ĞŸĞ°Ğ½ĞµĞ»ÑŒ Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚Ğ¾Ğ² -->
  <div id="tools-panel">
    <button class="close-btn" onclick="closeToolsPanel()">Ã—</button>
    <h2>ğŸ›  Ğ˜Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚Ñ‹</h2>
    <div>
      <label for="htmlFile">ğŸ“¤ Ğ—Ğ°Ğ³Ñ€ÑƒĞ·Ğ¸Ñ‚ÑŒ .html Ñ„Ğ°Ğ¹Ğ»</label>
      <input type="file" id="htmlFile" accept=".html,.htm">
    </div>
    <textarea id="htmlEditor" placeholder="Ğ—Ğ´ĞµÑÑŒ Ğ¿Ğ¾ÑĞ²Ğ¸Ñ‚ÑÑ ÑĞ¾Ğ´ĞµÑ€Ğ¶Ğ¸Ğ¼Ğ¾Ğµ Ñ„Ğ°Ğ¹Ğ»Ğ° Ğ¸Ğ»Ğ¸ Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ Ğ½Ğ°Ğ¿Ğ¸ÑĞ°Ñ‚ÑŒ ÑĞ²Ğ¾Ñ‘..."></textarea>
    <div>
      <label for="blockTemplates">ğŸ“¦ Ğ¨Ğ°Ğ±Ğ»Ğ¾Ğ½Ñ‹ Ğ±Ğ»Ğ¾ĞºĞ¾Ğ²</label>
      <select id="blockTemplates">
        <option value="">Ğ’Ñ‹Ğ±ĞµÑ€Ğ¸ ÑˆĞ°Ğ±Ğ»Ğ¾Ğ½...</option>
        <option value="<header><h1>Ğ—Ğ°Ğ³Ğ¾Ğ»Ğ¾Ğ²Ğ¾Ğº</h1></header>">Ğ¨Ğ°Ğ¿ĞºĞ°</option>
        <option value="<footer><p>Ğ¤ÑƒÑ‚ĞµÑ€</p></footer>">Ğ¤ÑƒÑ‚ĞµÑ€</option>
        <option value="<section><h2>Ğ‘Ğ»Ğ¾Ğº</h2><p>Ğ¢ĞµĞºÑÑ‚ Ğ±Ğ»Ğ¾ĞºĞ°...</p></section>">Ğ¡ĞµĞºÑ†Ğ¸Ñ</option>
      </select>
      <button onclick="insertBlockTemplate()">Ğ’ÑÑ‚Ğ°Ğ²Ğ¸Ñ‚ÑŒ</button>
    </div>
    <div>
      <label for="htmlDescInput">ğŸ§  Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ HTML Ğ¿Ğ¾ Ğ¾Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸Ñ</label>
      <input type="text" id="htmlDescInput" placeholder="ĞĞ°Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€: 'ĞšĞ½Ğ¾Ğ¿ĞºĞ° Ñ Ğ½Ğ°Ğ´Ğ¿Ğ¸ÑÑŒÑ ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ¸Ñ‚ÑŒ'">
      <button onclick="generateHtmlFromDesc()">Ğ¡Ğ³ĞµĞ½ĞµÑ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ</button>
    </div>
    <div class="panel-buttons">
      <button onclick="saveHtmlFile()">ğŸ’¾ Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½Ğ¸Ñ‚ÑŒ</button>
      <button onclick="exportZip()">ğŸ“¦ Ğ­ĞºÑĞ¿Ğ¾Ñ€Ñ‚ ZIP</button>
      <button onclick="closeToolsPanel()">Ğ—Ğ°ĞºÑ€Ñ‹Ñ‚ÑŒ</button>
    </div>
  </div>

  <!-- Ğ¡ĞºÑ€Ğ¸Ğ¿Ñ‚Ñ‹: Ğ²Ğ½ĞµÑˆĞ½Ğ¸Ğµ Ğ¸ Ğ¼Ğ¾Ğ´ÑƒĞ»Ğ¸ -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
  <script src="wallet.js"></script>
  <script src="https://unpkg.com/dropbox/dist/Dropbox-sdk.min.js"></script>
  <script src="engine/dropbox.js"></script>
  <script src="engine/engineer.js"></script>
  <script src="engine/dream.js"></script>
  <script type="module" src="engine/agents/terminal/terminal-v2.js"></script>
  <!-- ĞŸĞ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ Ğ¿Ğ°Ğ½ĞµĞ»Ğ¸ Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚Ğ¾Ğ² Ğ¸ Ğ°Ğ³ĞµĞ½Ñ‚Ğ¾Ğ² -->
  <script type="module">
    import * as toolsAgent from './engine/agents/tools-agent.js';
    import { renderToolsPanel } from './engine/agents/tools-ui.js';
    window.toolsAgent = toolsAgent;
    renderToolsPanel();
    document.getElementById("toolsButton").addEventListener("click", () => {
      toolsAgent.showToolsPanel();
    });
  </script>
  <!-- JS Ğ´Ğ»Ñ Ğ¿Ğ°Ğ½ĞµĞ»Ğ¸ Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚Ğ¾Ğ² Ğ¸ Ğ½Ğ¾Ğ²Ñ‹Ñ… Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¹ -->
  <script>
    // --- Ğ¢ĞµĞ¼Ğ° ---
    function toggleTheme() {
      document.body.classList.toggle('dark-theme');
      localStorage.setItem('theme', document.body.classList.contains('dark-theme') ? 'dark' : 'light');
    }

    // --- ĞšĞ¾ÑˆĞµĞ»Ñ‘Ğº ---
    function addCoins(amount) {
      let current = parseInt(localStorage.getItem('webcoin') || '0', 10);
      current += amount;
      localStorage.setItem('webcoin', current);
      document.getElementById('webcoin-balance').textContent = `Ğ‘Ğ°Ğ»Ğ°Ğ½Ñ: ${current} WKC`;
    }
    function resetCoins() {
      localStorage.setItem('webcoin', '0');
      document.getElementById('webcoin-balance').textContent = `Ğ‘Ğ°Ğ»Ğ°Ğ½Ñ: 0 WKC`;
    }

    // --- Ğ¢ĞµÑ€Ğ¼Ğ¸Ğ½Ğ°Ğ» ---
    function runTerminalCommand() {
      const e = new KeyboardEvent('keydown', { key: 'Enter' });
      document.getElementById('terminal-input').dispatchEvent(e);
    }
    function openFilePicker() {
      const inp = document.createElement('input');
      inp.type = 'file';
      inp.click();
    }
    function copyTerminalInput() {
      const input = document.getElementById('terminal-input');
      navigator.clipboard.writeText(input.value);
    }

    // --- ĞŸĞ°Ğ½ĞµĞ»ÑŒ Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚Ğ¾Ğ² ---
    function openToolsPanel() {
      document.getElementById('tools-panel').style.display = 'block';
    }
    function closeToolsPanel() {
      document.getElementById('tools-panel').style.display = 'none';
      document.getElementById('htmlFile').value = '';
    }
    // Ğ”Ğ»Ñ ÑĞ¾Ğ²Ğ¼ĞµÑÑ‚Ğ¸Ğ¼Ğ¾ÑÑ‚Ğ¸ Ñ Ğ¼Ğ¾Ğ´ÑƒĞ»ÑĞ¼Ğ¸
    if (document.getElementById('toolsButton')) {
      document.getElementById('toolsButton').onclick = openToolsPanel;
    }

    // --- Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° .html Ñ„Ğ°Ğ¹Ğ»Ğ° ---
    document.getElementById('htmlFile').addEventListener('change', function(e) {
      const file = e.target.files[0];
      if (!file) return;
      const reader = new FileReader();
      reader.onload = function(ev) {
        document.getElementById('htmlEditor').value = ev.target.result;
      };
      reader.readAsText(file, 'UTF-8');
    });

    // --- Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ .html Ñ„Ğ°Ğ¹Ğ»Ğ° ---
    function saveHtmlFile() {
      const content = document.getElementById('htmlEditor').value;
      const blob = new Blob([content], {type: 'text/html'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = 'result.html';
      document.body.appendChild(a);
      a.click();
      setTimeout(() => {
        document.body.removeChild(a);
        URL.revokeObjectURL(url);
      }, 0);
    }

    // --- Ğ’ÑÑ‚Ğ°Ğ²ĞºĞ° ÑˆĞ°Ğ±Ğ»Ğ¾Ğ½Ğ° Ğ±Ğ»Ğ¾ĞºĞ° ---
    function insertBlockTemplate() {
      const select = document.getElementById('blockTemplates');
      const value = select.value;
      if (value) {
        const editor = document.getElementById('htmlEditor');
        editor.value += '\n' + value;
      }
    }

    // --- Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ HTML Ğ¿Ğ¾ Ğ¾Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸Ñ ---
    function generateHtmlFromDesc() {
      const desc = document.getElementById('htmlDescInput').value.trim().toLowerCase();
      let html = '';
      if (desc.includes('ĞºĞ½Ğ¾Ğ¿ĞºĞ°')) {
        const match = desc.match(/ĞºĞ½Ğ¾Ğ¿ĞºĞ° Ñ Ğ½Ğ°Ğ´Ğ¿Ğ¸ÑÑŒÑ (.+)/);
        html = `<button>${match ? match[1] : 'ĞšĞ½Ğ¾Ğ¿ĞºĞ°'}</button>`;
      } else if (desc.includes('Ğ·Ğ°Ğ³Ğ¾Ğ»Ğ¾Ğ²Ğ¾Ğº')) {
        html = `<h1>Ğ—Ğ°Ğ³Ğ¾Ğ»Ğ¾Ğ²Ğ¾Ğº</h1>`;
      } else if (desc.includes('ÑĞ¿Ğ¸ÑĞ¾Ğº')) {
        html = `<ul><li>ĞŸÑƒĞ½ĞºÑ‚ 1</li><li>ĞŸÑƒĞ½ĞºÑ‚ 2</li></ul>`;
      } else {
        html = '<!-- ĞĞµ ÑƒĞ´Ğ°Ğ»Ğ¾ÑÑŒ Ñ€Ğ°ÑĞ¿Ğ¾Ğ·Ğ½Ğ°Ñ‚ÑŒ Ğ¾Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ -->';
      }
      document.getElementById('htmlEditor').value += '\n' + html;
    }

    // --- Ğ­ĞºÑĞ¿Ğ¾Ñ€Ñ‚ ZIP ---
    function exportZip() {
      const html = document.getElementById('htmlEditor').value;
      if (!window.JSZip) {
        const script = document.createElement('script');
        script.src = 'https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js';
        script.onload = exportZip;
        document.body.appendChild(script);
        return;
      }
      const zip = new JSZip();
      zip.file("index.html", html);
      zip.generateAsync({type:"blob"}).then(function(content) {
        const a = document.createElement('a');
        a.href = URL.createObjectURL(content);
        a.download = "project.zip";
        document.body.appendChild(a);
        a.click();
        setTimeout(() => {
          document.body.removeChild(a);
          URL.revokeObjectURL(a.href);
        }, 0);
      });
    }

    // --- ĞŸÑ€ĞµĞ»Ğ¾Ğ°Ğ´ĞµÑ€ Ğ¸ Ñ‚ĞµĞ¼Ğ° Ğ¿Ñ€Ğ¸ Ğ·Ğ°Ğ¿ÑƒÑĞºĞµ ---
    window.addEventListener('load', () => {
      document.getElementById('preloader').style.opacity = '0';
      setTimeout(() => {
        document.getElementById('preloader').style.display = 'none';
        document.getElementById('terminal-input').focus();
      }, 400);

      if (localStorage.getItem('theme') === 'dark') {
        document.body.classList.add('dark-theme');
      }
      const coins = parseInt(localStorage.getItem('webcoin') || '0', 10);
      document.getElementById('webcoin-balance').textContent = `Ğ‘Ğ°Ğ»Ğ°Ğ½Ñ: ${coins} WKC`;
    });
  </script><!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="description" content="WebKurier: Ñ‚ĞµÑ€Ğ¼Ğ¸Ğ½Ğ°Ğ», ĞºĞ¾ÑˆĞµĞ»Ñ‘Ğº, Ğ¾Ñ„Ğ»Ğ°Ğ¹Ğ½-Ğ´Ğ¾ÑÑ‚ÑƒĞ¿">
  <link rel="icon" href="favicon.ico" type="image/x-icon">
  <title data-i18n="title">WebKurierCore</title>
  <script src="i18n/i18n.js" type="module"></script>
</head>
<body>
  <button class="toggle-theme" onclick="toggleTheme()" data-i18n="toggle_theme">Ğ¡Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ Ñ‚ĞµĞ¼Ñƒ</button>

  <h1 data-i18n="welcome_title">ğŸŒ WebKurierCore</h1>
  <p data-i18n="welcome_desc">Ğ”Ğ¾Ğ±Ñ€Ğ¾ Ğ¿Ğ¾Ğ¶Ğ°Ğ»Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ² Ğ°Ğ²Ñ‚Ğ¾Ğ½Ğ¾Ğ¼Ğ½Ñ‹Ğ¹ Ğ¸Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹Ñ WebKurier: Ñ‚ĞµÑ€Ğ¼Ğ¸Ğ½Ğ°Ğ», ĞºĞ¾ÑˆĞµĞ»Ñ‘Ğº, Telegram-ÑĞ²ÑĞ·ÑŒ.</p>

  <div class="wallet">
    <h2 data-i18n="wallet_title">ğŸ’° WebCoin-ĞºĞ¾ÑˆĞµĞ»Ñ‘Ğº</h2>
    <div class="balance" id="webcoin-balance" data-i18n="wallet_balance">Ğ‘Ğ°Ğ»Ğ°Ğ½Ñ: 0 WKC</div>
    <button onclick="addCoins(10)" data-i18n="wallet_add">+10 WKC</button>
    <button onclick="resetCoins()" data-i18n="wallet_reset">Ğ¡Ğ±Ñ€Ğ¾Ñ</button>
  </div>

  <div class="terminal">
    <div data-i18n="terminal_title">&gt; WebKurier Terminal v1.0</div>
    <input type="text" id="terminal-input" placeholder="Ğ’Ğ²ĞµĞ´Ğ¸ ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ñƒ..." data-i18n-placeholder="terminal_placeholder">
    <div id="terminal-log"></div>
  </div>

  <div class="terminal-buttons">
    <button onclick="runTerminalCommand()" data-i18n="run">â ĞŸÑƒÑĞº</button>
    <button onclick="openFilePicker()" data-i18n="files">ğŸ“ Ğ¤Ğ°Ğ¹Ğ»Ñ‹</button>
    <button id="toolsButton" data-i18n="tools">ğŸ›  Ğ˜Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚Ñ‹</button>
    <button onclick="copyTerminalInput()" data-i18n="copy">ğŸ“‹ ĞšĞ¾Ğ¿Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ</button>
  </div>

  <h2 data-i18n="telegram_title">ğŸ”— Telegram</h2>
  <p><a href="https://t.me/WebKurierBot" target="_blank">@WebKurierBot</a></p>
<section>
  <h2>ğŸ“ Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ° <strong>WebKurierCore</strong></h2>
  <details open>
    <summary>ğŸ“‚ WebKurierCore</summary>
    <ul>
      <li>ğŸ§¾ <code>index.html</code> â€” ğŸŒ Ğ“Ğ»Ğ°Ğ²Ğ½Ğ°Ñ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ğ°</li>
      <li>ğŸ’» <code>terminal.js</code> â€” Ğ¢ĞµÑ€Ğ¼Ğ¸Ğ½Ğ°Ğ»</li>
      <li>ğŸ’° <code>wallet.js</code> â€” ĞšĞ¾ÑˆĞµĞ»Ñ‘Ğº WebCoin</li>
      <li>ğŸ¨ <code>styles.css</code> â€” Ğ¡Ñ‚Ğ¸Ğ»Ğ¸</li>
      <li>ğŸ“˜ <code>README.md</code> â€” Ğ”Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ</li>
      <details>
        <summary>ğŸ“ i18n/</summary>
        <li>ğŸŒ <a href="https://vladislav6410.github.io/i18n/i18n.js" target="_blank"><code>i18n.js</code></a> â€” Ğ˜Ğ½Ñ‚ĞµÑ€Ğ½Ğ°Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ</li>
      </details>
      <details>
        <summary>ğŸ“ lang-select/</summary>
        <li>ğŸš© <a href="https://vladislav6410.github.io/lang-select/flags.html" target="_blank"><code>flags.html</code></a> â€” Ğ¡Ñ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ğ° Ğ²Ñ‹Ğ±Ğ¾Ñ€Ğ° ÑĞ·Ñ‹ĞºĞ°</li>
      </details>
      <details>
        <summary>ğŸ“ translations/</summary>
        <li>ğŸ‡·ğŸ‡º <a href="https://t.me/WebKurierBot?start=edit_ru">ru.json</a></li>
        <li>ğŸ‡¬ğŸ‡§ <a href="https://t.me/WebKurierBot?start=edit_en">en.json</a></li>
        <li>ğŸ‡©ğŸ‡ª <a href="https://t.me/WebKurierBot?start=edit_de">de.json</a></li>
        <li>ğŸ‡«ğŸ‡· <a href="https://t.me/WebKurierBot?start=edit_fr">fr.json</a></li>
        <li>ğŸ‡µğŸ‡± <a href="https://t.me/WebKurierBot?start=edit_pl">pl.json</a></li>
        <li>ğŸ‡¨ğŸ‡¿ <a href="https://t.me/WebKurierBot?start=edit_cs">cs.json</a></li>
        <li>ğŸ‡·ğŸ‡´ <a href="https://t.me/WebKurierBot?start=edit_ro">ro.json</a></li>
        <li>ğŸ‡§ğŸ‡¬ <a href="https://t.me/WebKurierBot?start=edit_bg">bg.json</a></li>
        <li>ğŸ‡±ğŸ‡¹ <a href="https://t.me/WebKurierBot?start=edit_lt">lt.json</a></li>
        <li>ğŸ‡­ğŸ‡· <a href="https://t.me/WebKurierBot?start=edit_hr">hr.json</a></li>
        <li>ğŸ‡­ğŸ‡º <a href="https://t.me/WebKurierBot?start=edit_hu">hu.json</a></li>
        <li>ğŸ‡©ğŸ‡° <a href="https://t.me/WebKurierBot?start=edit_da">da.json</a></li>
        <li>ğŸ‡ªğŸ‡¸ <a href="https://t.me/WebKurierBot?start=edit_es">es.json</a></li>
        <li>ğŸ‡®ğŸ‡¹ <a href="https://t.me/WebKurierBot?start=edit_it">it.json</a></li>
        <li>ğŸ‡ºğŸ‡¦ <a href="https://t.me/WebKurierBot?start=edit_uk">uk.json</a></li>
        <li>ğŸ‡³ğŸ‡´ <a href="https://t.me/WebKurierBot?start=edit_no">no.json</a></li>
        <li>ğŸ‡µğŸ‡¹ <a href="https://t.me/WebKurierBot?start=edit_pt">pt.json</a></li>
        <li>ğŸ‡¹ğŸ‡· <a href="https://t.me/WebKurierBot?start=edit_tr">tr.json</a></li>
        <li>ğŸ‡¸ğŸ‡® <a href="https://t.me/WebKurierBot?start=edit_sl">sl.json</a></li>
        <li>ğŸ‡¬ğŸ‡· <a href="https://t.me/WebKurierBot?start=edit_el">el.json</a></li>
        <li>ğŸ‡·ğŸ‡¸ <a href="https://t.me/WebKurierBot?start=edit_sr">sr.json</a></li>
        <li>ğŸ‡±ğŸ‡» <a href="https://t.me/WebKurierBot?start=edit_lv">lv.json</a></li>
        <li>ğŸ‡ªğŸ‡ª <a href="https://t.me/WebKurierBot?start=edit_et">et.json</a></li>
        <li>ğŸ‡³ğŸ‡± <a href="https://t.me/WebKurierBot?start=edit_nl">nl.json</a></li>
      </details>
    </ul>
  </details>
</section>
  <!-- ĞŸĞ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ Telegram WebApp SDK -->
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <script>
    const tg = window.Telegram.WebApp;
    if (tg && tg.initDataUnsafe && tg.initDataUnsafe.user) {
      const tgLang = tg.initDataUnsafe.user.language_code;
      if (!localStorage.getItem('lang')) {
        localStorage.setItem('lang', tgLang);
        window.location.href = window.location.pathname + '?lang=' + tgLang;
      }
    }
  </script><!-- ĞšĞ½Ğ¾Ğ¿ĞºĞ° Ğ¿ĞµÑ€ĞµÑ…Ğ¾Ğ´Ğ° Ğº ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğµ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ° -->
<p><a href="#structure" style="font-size:16px; text-decoration:none;">ğŸ“‚ ĞÑ‚ĞºÑ€Ñ‹Ñ‚ÑŒ ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ñƒ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°</a></p>

<!-- ĞŸĞ°Ğ½ĞµĞ»ÑŒ JSON-Ñ€ĞµĞ´Ğ°ĞºÑ‚Ğ¾Ñ€Ğ° -->
<div id="json-editor-panel" style="display:none; position:fixed; top:10%; left:50%; transform:translateX(-50%);
     background:#fff; border:2px solid #ccc; border-radius:10px; padding:20px; max-width:90vw; max-height:80vh;
     overflow:auto; z-index:9999; box-shadow:0 0 20px rgba(0,0,0,0.2); font-family:monospace;">
  <button onclick="document.getElementById('json-editor-panel').style.display='none'"
          style="position:absolute; top:8px; right:12px; font-size:18px;">Ã—</button>
  <h3>ğŸ“ Ğ ĞµĞ´Ğ°ĞºÑ‚Ğ¾Ñ€ JSON</h3>
  <textarea id="json-editor" style="width:100%; height:300px; font-family:monospace; font-size:14px;"></textarea>
  <br><br>
  <button onclick="saveJsonFile()">ğŸ’¾ Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½Ğ¸Ñ‚ÑŒ</button>
</div>

<script>
  // ĞÑ‚ĞºÑ€Ñ‹Ñ‚Ğ¸Ğµ JSON-Ñ€ĞµĞ´Ğ°ĞºÑ‚Ğ¾Ñ€Ğ°
  document.querySelectorAll('a[href$=".json"]').forEach(el => {
    el.addEventListener('click', function(event) {
      event.preventDefault();
      const url = this.href;
      fetch(url)
        .then(res => res.text())
        .then(data => {
          document.getElementById('json-editor').value = data;
          document.getElementById('json-editor-panel').style.display = 'block';
        })
        .catch(err => {
          document.getElementById('json-editor').value = 'ĞÑˆĞ¸Ğ±ĞºĞ° Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ¸ Ñ„Ğ°Ğ¹Ğ»Ğ°: ' + err;
          document.getElementById('json-editor-panel').style.display = 'block';
        });
    });
  });

  // Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ JSON
  function saveJsonFile() {
    const data = document.getElementById('json-editor').value;
    const blob = new Blob([data], {type: "application/json"});
    const a = document.createElement('a');
    a.href = URL.createObjectURL(blob);
    a.download = "translation.json";
    a.click();
    URL.revokeObjectURL(a.href);
  }
</script>
</body>
</html>
