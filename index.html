<!DOCTYPE html>
<html lang="ru">
<head>
  <!-- ...Ğ¾ÑÑ‚Ğ°Ğ»ÑŒĞ½Ğ°Ñ Ñ‡Ğ°ÑÑ‚ÑŒ head... -->
</head>
<body>
  <!-- ...ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒÑÑ‰Ğ¸Ğ¹ ĞºĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚... -->

  <!-- ğŸ“Š Ğ¢Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ° Ğ¿Ñ€Ğ°Ğ¹ÑĞ¾Ğ² Ğ½Ğ° Ğ°ÑÑ€Ğ¾Ñ„Ğ¾Ñ‚Ğ¾ÑÑŠÑ‘Ğ¼ĞºÑƒ -->
  <section id="drone-prices">
    <h2>ğŸ“Š ĞŸÑ€Ğ°Ğ¹Ñ Ğ½Ğ° Ğ°ÑÑ€Ğ¾Ñ„Ğ¾Ñ‚Ğ¾ÑÑŠÑ‘Ğ¼ĞºÑƒ (1 ĞºĞ¼Â²)</h2>
    <table border="1" cellpadding="8" cellspacing="0" style="border-collapse: collapse; width: 100%; font-family: sans-serif;">
      <thead style="background: #f0f0f0;">
        <tr>
          <th>â„–</th>
          <th>ĞŸĞ°ĞºĞµÑ‚</th>
          <th>ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ</th>
          <th>Ğ¦ĞµĞ½Ğ°</th>
          <th>Ğ¡Ñ€Ğ¾Ğº</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>1</td>
          <td><b>Base Map</b></td>
          <td>ĞÑ€Ñ‚Ğ¾Ñ„Ğ¾Ñ‚Ğ¾ (GeoTIFF, JPG), PDF-ĞºĞ°Ñ€Ñ‚Ğ°, Ğ²Ñ‹Ñ€Ğ°Ğ²Ğ½Ğ¸Ğ²Ğ°Ğ½Ğ¸Ğµ, Ğ±Ğ°Ğ·Ğ¾Ğ²Ğ°Ñ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ°</td>
          <td><b>390â€¯â‚¬</b></td>
          <td>1â€“2 Ğ´Ğ½Ñ</td>
        </tr>
        <tr>
          <td>2</td>
          <td><b>3D Terrain</b></td>
          <td>DSM/DTM, 3D-Ğ¼Ğ¾Ğ´ĞµĞ»ÑŒ (.OBJ, .PLY, .LAS), Ğ¾Ğ±Ğ»Ğ°ĞºĞ¾ Ñ‚Ğ¾Ñ‡ĞµĞº, Ñ‚Ğ¾Ñ‡Ğ½Ğ°Ñ Ğ³ĞµĞ¾Ğ¿Ñ€Ğ¸Ğ²ÑĞ·ĞºĞ°</td>
          <td><b>790â€¯â‚¬</b></td>
          <td>2â€“3 Ğ´Ğ½Ñ</td>
        </tr>
        <tr>
          <td>3</td>
          <td><b>GeoAnalysis</b></td>
          <td>NDVI/NDRE, Ñ€Ğ°ÑÑ‚Ñ€Ğ¾Ğ²Ñ‹Ğ¹ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·, Ğ¾Ñ‚Ñ‡Ñ‘Ñ‚ Ğ² PDF, ĞºĞ¾Ğ½Ñ‚ÑƒÑ€Ñ‹ Ğ¾Ğ±ÑŠĞµĞºÑ‚Ğ¾Ğ², ĞºĞ»Ğ°ÑÑĞ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ñ</td>
          <td><b>1290â€¯â‚¬</b></td>
          <td>3â€“5 Ğ´Ğ½ĞµĞ¹</td>
        </tr>
      </tbody>
    </table>
  </section>

  <!-- ğŸ ĞšĞ¾Ğ´ Python Ğ´Ğ»Ñ Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸ Ğ³ĞµĞ¾Ğ¾Ñ‚Ñ‡Ñ‘Ñ‚Ğ¾Ğ² -->
  <section id="python-code" style="margin-top: 40px; background: #f8f8f8; padding: 20px; border-radius: 10px;">
    <h2>ğŸ“ ĞšĞ¾Ğ´ Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ‚Ğ¾Ñ€Ğ° Ğ³ĞµĞ¾Ğ¾Ñ‚Ñ‡Ñ‘Ñ‚Ğ° (Python)</h2>
    <pre style="background: #2d2d2d; color: #f8f8f2; padding: 20px; border-radius: 8px; overflow-x: auto; font-family: 'Courier New', monospace;">
import os
import json
from fpdf import FPDF
from datetime import datetime

# ğŸ“Œ ĞŸÑƒÑ‚ÑŒ Ğº ÑĞ¾Ñ…Ñ€Ğ°Ğ½Ñ‘Ğ½Ğ½Ñ‹Ğ¼ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğ¼ ÑÑŠÑ‘Ğ¼ĞºĞ¸ Ğ¸ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ¾Ğ²
DATA_DIR = "./engine/logs/reports/"
OUTPUT_DIR = "./engine/logs/generated/"

class GeoReport:
    def __init__(self, mission_name):
        self.mission_name = mission_name
        self.report_data = {}
        self.date = datetime.now().strftime("%Y-%m-%d %H:%M")

    def load_data(self):
        file_path = os.path.join(DATA_DIR, f"{self.mission_name}.json")
        if not os.path.exists(file_path):
            raise FileNotFoundError(f"ĞĞµÑ‚ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ´Ğ»Ñ Ğ¾Ñ‚Ñ‡Ñ‘Ñ‚Ğ°: {file_path}")
        with open(file_path, 'r', encoding='utf-8') as f:
            self.report_data = json.load(f)

    def generate_pdf(self):
        pdf = FPDF()
        pdf.add_page()
        pdf.set_font("Arial", "B", 14)

        # Ğ—Ğ°Ğ³Ğ¾Ğ»Ğ¾Ğ²Ğ¾Ğº
        pdf.cell(0, 10, f"ğŸ“ Ğ“ĞµĞ¾Ğ¾Ñ‚Ñ‡Ñ‘Ñ‚: {self.mission_name}", ln=True)
        pdf.set_font("Arial", "", 12)
        pdf.cell(0, 10, f"Ğ”Ğ°Ñ‚Ğ° Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸: {self.date}", ln=True)

        # ğŸ“Š ĞÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ğµ Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹
        pdf.ln(10)
        for key, value in self.report_data.items():
            if isinstance(value, dict):
                pdf.set_font("Arial", "B", 12)
                pdf.cell(0, 10, f"ğŸ”¹ {key}", ln=True)
                pdf.set_font("Arial", "", 12)
                for subkey, subvalue in value.items():
                    pdf.cell(0, 10, f"  â€¢ {subkey}: {subvalue}", ln=True)
            else:
                pdf.cell(0, 10, f"{key}: {value}", ln=True)

        # Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ
        os.makedirs(OUTPUT_DIR, exist_ok=True)
        output_path = os.path.join(OUTPUT_DIR, f"{self.mission_name}_report.pdf")
        pdf.output(output_path)
        return output_path


# ğŸ§ª ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ:
if __name__ == "__main__":
    report = GeoReport("test_mission_01")
    report.load_data()
    path = report.generate_pdf()
    print(f"âœ… ĞÑ‚Ñ‡Ñ‘Ñ‚ ÑĞ¾Ñ…Ñ€Ğ°Ğ½Ñ‘Ğ½: {path}")</pre>
    
    <div style="margin-top: 20px; background: #e6f7ff; padding: 15px; border-radius: 8px; border-left: 4px solid #1890ff;">
      <h3>ğŸ”§ Ğ“Ğ´Ğµ Ñ€Ğ°Ğ·Ğ¼ĞµÑ‰Ğ°Ñ‚ÑŒ:</h3>
      <ul>
        <li><code>report_generator.py</code> â†’ Ğ² Ğ¿Ğ°Ğ¿ĞºÑƒ Webkuriercore/ Ñ€ÑĞ´Ğ¾Ğ¼ Ñ main.py</li>
        <li>Ğ”Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ² Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğµ JSON â†’ <code>engine/logs/reports/</code></li>
        <li>PDF-Ñ„Ğ°Ğ¹Ğ»Ñ‹ Ğ¾Ñ‚Ñ‡Ñ‘Ñ‚Ğ¾Ğ² â†’ <code>engine/logs/generated/</code></li>
      </ul>
      
      <h3>ğŸ“‚ ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ Ğ²Ñ…Ğ¾Ğ´Ğ½Ğ¾Ğ³Ğ¾ Ñ„Ğ°Ğ¹Ğ»Ğ°:</h3>
      <pre style="background: #fff; padding: 15px; border-radius: 8px; border: 1px solid #ddd;">
{
  "Ğ£Ñ‡Ğ°ÑÑ‚Ğ¾Ğº": "ĞŸĞ¾Ğ»ĞµĞ²Ğ¾Ğ¹ Ğ¼Ğ°ÑÑĞ¸Ğ² 3A",
  "GSD": "3.5 ÑĞ¼/Ğ¿Ğ¸ĞºÑĞµĞ»ÑŒ",
  "Ğ’Ñ‹ÑĞ¾Ñ‚Ğ° Ğ¿Ğ¾Ğ»ĞµÑ‚Ğ°": "120 Ğ¼",
  "ĞšĞ°Ğ¼ĞµÑ€Ğ°": "Sony RX1RM2",
  "ĞšĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ ÑĞ½Ğ¸Ğ¼ĞºĞ¾Ğ²": 198,
  "Ğ Ğ°Ğ·Ğ¼ĞµÑ€ Ğ¾Ğ±Ğ»Ğ°ÑÑ‚Ğ¸": "12.5 Ğ³Ğ°",
  "ĞŸĞµÑ€ĞµĞºÑ€Ñ‹Ñ‚Ğ¸Ğµ": {
    "ĞŸÑ€Ğ¾Ğ´Ğ¾Ğ»ÑŒĞ½Ğ¾Ğµ": "80%",
    "ĞŸĞ¾Ğ¿ĞµÑ€ĞµÑ‡Ğ½Ğ¾Ğµ": "70%"
  },
  "Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ñ‹": {
    "ĞÑ€Ñ‚Ğ¾Ñ„Ğ¾Ñ‚Ğ¾Ğ¿Ğ»Ğ°Ğ½": "Ğ¡Ñ„Ğ¾Ñ€Ğ¼Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½",
    "Ğ¦ĞœĞ ": "Ğ“Ğ¾Ñ‚Ğ¾Ğ²Ğ°",
    "3D-ÑÑ†ĞµĞ½Ğ°": "Ğ­ĞºÑĞ¿Ğ¾Ñ€Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ° Ğ² OBJ"
  }
}</pre>
    </div>
  </section>

  <!-- ğŸ“‚ Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ¿Ğ°Ğ¿Ğ¾Ğº Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ° -->
  <section id="folder-structure" style="margin-top: 40px;">
    <h2>ğŸ“‚ Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ¿Ğ°Ğ¿Ğ¾Ğº Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°</h2>
    <div style="background: #f0f8ff; padding: 20px; border-radius: 10px; font-family: 'Courier New', monospace; line-height: 1.6;">
      engine/<br>
      â”œâ”€â”€ agents/<br>
      â”‚Â Â  â”œâ”€â”€ geodesist/<br>
      â”‚Â Â  â”‚Â Â  â”œâ”€â”€ report/                  &larr; Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ PDF, GeoTIFF, NDVI<br>
      â”‚Â Â  â”‚Â Â  â”œâ”€â”€ ui/                      &larr; Ğ˜Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹Ñ ĞºĞ½Ğ¾Ğ¿Ğ¾Ğº /Ğ¾Ñ‚Ñ‡Ñ‘Ñ‚, /Ñ†ĞµĞ½Ñ‹<br>
      â”‚Â Â  â”‚Â Â  â””â”€â”€ templates/               &larr; HTML, PDF ÑˆĞ°Ğ±Ğ»Ğ¾Ğ½Ñ‹ Ğ¾Ñ‚Ñ‡Ñ‘Ñ‚Ğ¾Ğ²<br>
      â”‚Â Â  â”œâ”€â”€ autopilot/                   &larr; ĞĞ³ĞµĞ½Ñ‚ Ğ°Ğ²Ñ‚Ğ¾Ğ¿Ğ¸Ğ»Ğ¾Ñ‚Ğ° Ğ´Ñ€Ğ¾Ğ½Ğ°<br>
      â”‚Â Â  â”œâ”€â”€ pilot/                       &larr; ĞĞ³ĞµĞ½Ñ‚ Ñ€ÑƒÑ‡Ğ½Ğ¾Ğ³Ğ¾ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ<br>
      â”‚Â Â  â”œâ”€â”€ telemetry/                   &larr; Ğ¡Ğ±Ğ¾Ñ€ Ñ‚ĞµĞ»ĞµĞ¼ĞµÑ‚Ñ€Ğ¸Ğ¸<br>
      â”‚Â Â  â”œâ”€â”€ translator/                  &larr; ĞŸĞµÑ€ĞµĞ²Ğ¾Ğ´Ñ‡Ğ¸Ğº Ğ¸ Ğ»Ğ¾ĞºĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ<br>
      â”‚Â Â  â”œâ”€â”€ accountant/                  &larr; Ğ¤Ğ¸Ğ½Ğ°Ğ½ÑĞ¾Ğ²Ñ‹Ğµ Ğ¾Ñ‚Ñ‡Ñ‘Ñ‚Ñ‹ Ğ¸ Ğ½Ğ°Ğ»Ğ¾Ğ³Ğ¸<br>
      â”‚Â Â  â”œâ”€â”€ security/                    &larr; ĞĞ³ĞµĞ½Ñ‚ Ğ±ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾ÑÑ‚Ğ¸ (Ğ°Ğ½Ñ‚Ğ¸Ğ²Ğ¸Ñ€ÑƒÑ, Ñ‚Ğ¾ĞºĞµĞ½Ñ‹)<br>
      â”‚Â Â  â””â”€â”€ master/                      &larr; Ğ“Ğ»Ğ°Ğ²Ğ½Ñ‹Ğ¹ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ÑÑÑ‰Ğ¸Ğ¹<br>
      â”‚<br>
      â”œâ”€â”€ config/<br>
      â”‚Â Â  â”œâ”€â”€ settings.json                &larr; Ğ“Ğ»Ğ¾Ğ±Ğ°Ğ»ÑŒĞ½Ğ°Ñ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ<br>
      â”‚Â Â  â”œâ”€â”€ missions.json                &larr; ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ Ğ¿Ğ¾Ğ»Ñ‘Ñ‚Ğ¾Ğ²<br>
      â”‚Â Â  â””â”€â”€ report_config.json           &larr; ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ Ğ¾Ñ‚Ñ‡Ñ‘Ñ‚Ğ¾Ğ²<br>
      â”‚<br>
      â”œâ”€â”€ logs/<br>
      â”‚Â Â  â”œâ”€â”€ reports/                     &larr; Ğ¡Ñ‹Ñ€Ñ‹Ğµ JSON-Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ¿Ğ¾Ğ»ĞµĞ¹<br>
      â”‚Â Â  â”œâ”€â”€ generated/                   &larr; PDF, GeoTIFF, Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸<br>
      â”‚Â Â  â””â”€â”€ telemetry/                   &larr; Ğ”Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ¿Ğ¾Ğ»Ñ‘Ñ‚Ğ°, Ğ´Ğ°Ñ‚Ñ‡Ğ¸ĞºĞ¸<br>
      â”‚<br>
      â”œâ”€â”€ memory/<br>
      â”‚Â Â  â””â”€â”€ assistant_memory.json        &larr; Ğ’Ğ¸Ñ€Ñ‚ÑƒĞ°Ğ»ÑŒĞ½Ğ°Ñ Ğ¿Ğ°Ğ¼ÑÑ‚ÑŒ Ğ¿Ğ¾Ğ¼Ğ¾Ñ‰Ğ½Ğ¸ĞºĞ°<br>
      â”‚<br>
      â”œâ”€â”€ prompts/<br>
      â”‚Â Â  â”œâ”€â”€ geodesy.prompt.json          &larr; Ğ¨Ğ°Ğ±Ğ»Ğ¾Ğ½Ñ‹ Ğ·Ğ°Ğ´Ğ°Ñ‡ Ğ¿Ğ¾ Ğ³ĞµĞ¾Ğ´ĞµĞ·Ğ¸Ğ¸<br>
      â”‚Â Â  â”œâ”€â”€ report.prompt.json           &larr; Ğ¤Ğ¾Ñ€Ğ¼ÑƒĞ»Ğ¸Ñ€Ğ¾Ğ²ĞºĞ¸ Ğ¾Ñ‚Ñ‡Ñ‘Ñ‚Ğ¾Ğ²<br>
      â”‚Â Â  â””â”€â”€ ui.prompt.json               &larr; Ğ¢ĞµĞºÑÑ‚Ñ‹ ĞºĞ½Ğ¾Ğ¿Ğ¾Ğº Ğ¸ Ğ¸Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹ÑĞ°<br>
      â”‚<br>
      â”œâ”€â”€ ui/<br>
      â”‚Â Â  â”œâ”€â”€ index.html                   &larr; Ğ˜Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹Ñ WebApp<br>
      â”‚Â Â  â”œâ”€â”€ report-ui.html               &larr; ĞÑ‚Ğ´ĞµĞ»ÑŒĞ½Ğ°Ñ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ğ° Ğ¾Ñ‚Ñ‡Ñ‘Ñ‚Ğ°<br>
      â”‚Â Â  â”œâ”€â”€ styles.css                   &larr; Ğ¡Ñ‚Ğ¸Ğ»Ğ¸<br>
      â”‚Â Â  â””â”€â”€ scripts/<br>
      â”‚Â Â      â”œâ”€â”€ report.js                &larr; ĞšĞ½Ğ¾Ğ¿ĞºĞ° /Ğ¾Ñ‚Ñ‡Ñ‘Ñ‚<br>
      â”‚Â Â      â”œâ”€â”€ prices.js                &larr; ĞšĞ½Ğ¾Ğ¿ĞºĞ° /Ñ†ĞµĞ½Ñ‹<br>
      â”‚Â Â      â””â”€â”€ utils.js                 &larr; ĞĞ±Ñ‰Ğ¸Ğµ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¸<br>
      â”‚<br>
      â””â”€â”€ data/<br>
          â”œâ”€â”€ cameras.json                 &larr; Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº ĞºĞ°Ğ¼ĞµÑ€ Ğ¸ GSD<br>
          â”œâ”€â”€ price_list.csv               &larr; ĞŸÑ€Ğ°Ğ¹Ñ Ğ½Ğ° 1 ĞºĞ¼Â²<br>
          â””â”€â”€ missions/<br>
              â””â”€â”€ mission1.json            &larr; ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ Ğ¼Ğ¸ÑÑĞ¸Ğ¹<br>
    </div>
  </section>

  <!-- ===== ĞŸĞ°Ğ½ĞµĞ»ÑŒ Ğ°Ğ³ĞµĞ½Ñ‚Ğ¾Ğ² ===== -->
<div id="agents-panel" class="agents-panel" aria-label="Agents panel"></div>

<style>
  /* ==== Ğ¡Ñ‚Ğ¸Ğ»Ğ¸ Ğ¿Ğ°Ğ½ĞµĞ»Ğ¸ Ğ°Ğ³ĞµĞ½Ñ‚Ğ¾Ğ² ==== */
  .agents-panel {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    margin: 20px 0;
  }

  /* Ğ’ĞĞ˜ĞœĞĞĞ˜Ğ•: Ğ¸Ğ¼Ñ ĞºĞ»Ğ°ÑÑĞ° ÑĞ¾Ğ²Ğ¿Ğ°Ğ´Ğ°ĞµÑ‚ Ñ loader.js => .agent-btn */
  .agent-btn {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    padding: 8px 14px;
    background: #0d6efd;       /* Ğ¾ÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ¹ Ñ†Ğ²ĞµÑ‚ */
    color: #fff;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-size: 14px;
    line-height: 1;
    transition: background 0.15s ease, transform 0.05s ease;
    user-select: none;
  }
  .agent-btn:hover { background: #0b5ed7; }
  .agent-btn:active { transform: translateY(1px); }
  .agent-btn[disabled] {
    background: #6c757d;
    cursor: not-allowed;
    opacity: .7;
  }
</style>

<script type="module">
  import { renderAgentButtons } from './engine/agents/loader.js';

  // Ğ–Ğ´Ñ‘Ğ¼, ĞºĞ¾Ğ³Ğ´Ğ° DOM Ğ³Ğ¾Ñ‚Ğ¾Ğ²
  window.addEventListener('DOMContentLoaded', () => {
    const panel = document.getElementById('agents-panel');
    if (!panel) {
      console.warn('âš ï¸ ĞĞµ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½ ÑĞ»ĞµĞ¼ĞµĞ½Ñ‚ #agents-panel');
      return;
    }

    renderAgentButtons(panel, (key, meta, mod) => {
      // Ğ§Ñ‚Ğ¾ Ğ´ĞµĞ»Ğ°Ñ‚ÑŒ Ğ¿Ñ€Ğ¸ ĞºĞ»Ğ¸ĞºĞµ Ğ½Ğ° ĞºĞ½Ğ¾Ğ¿ĞºÑƒ Ğ°Ğ³ĞµĞ½Ñ‚Ğ°
      if (mod?.run) {
        mod.run({ meta, key });
      } else {
        console.log(`ĞĞ³ĞµĞ½Ñ‚ "${meta.name}" Ğ·Ğ°Ğ³Ñ€ÑƒĞ¶ĞµĞ½, Ğ½Ğ¾ Ğ½ĞµÑ‚ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¸ run()`, mod);
      }
    });
  });
</script><script type="module">
  import { AIDesigner } from './engine/agents/tools/ai-builder.js';

  const designer = new AIDesigner();

  // ĞœĞ¸Ğ½Ğ¸-Ğ¿Ğ°Ğ½ĞµĞ»ÑŒ: Ğ¿Ğ¾Ğ»Ğµ + Ğ´Ğ²Ğµ ĞºĞ½Ğ¾Ğ¿ĞºĞ¸
  const panel = document.createElement('div');
  panel.style.cssText = 'position:fixed;right:16px;bottom:16px;max-width:420px;background:#151821;border:1px solid #2a3140;border-radius:12px;padding:12px;z-index:9999';
  panel.innerHTML = `
    <div style="font-weight:600;margin-bottom:8px">AI Builder</div>
    <textarea id="aiPrompt" rows="3" placeholder="ĞĞ¿Ğ¸ÑˆĞ¸ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñƒ: Ñ‚Ñ‘Ğ¼Ğ½Ğ°Ñ Ñ‚ĞµĞ¼Ğ°, hero, 3 ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞ¸, Ñ„Ğ¾Ñ€Ğ¼Ğ°..." style="width:100%;padding:8px;border-radius:10px;border:1px solid #2a3140;background:transparent;color:#e6e6e6"></textarea>
    <div style="display:flex;gap:8px;margin-top:8px">
      <button id="btnGen" style="flex:1">Ğ¡Ğ³ĞµĞ½ĞµÑ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ</button>
      <button id="btnZip" style="flex:1">Ğ­ĞºÑĞ¿Ğ¾Ñ€Ñ‚ ZIP</button>
    </div>
    <div id="aiStatus" style="opacity:.7;margin-top:6px"></div>
  `;
  document.body.appendChild(panel);

  const status = panel.querySelector('#aiStatus');

  async function generate() {
    status.textContent = 'Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ...';
    const prompt = panel.querySelector('#aiPrompt').value.trim();
    try {
      // Ğ¿Ğ¾ĞºĞ° offline-Ñ€ĞµĞ¶Ğ¸Ğ¼ (Ğ±ĞµĞ· Ğ±ÑĞºĞµĞ½Ğ´Ğ°):
      const { html, css } = await designer.generateOffline(prompt || 'hero, 3 cards, contact form, dark');
      // Ğ¾Ñ‚ĞºÑ€Ğ¾ĞµĞ¼ Ğ¿Ñ€ĞµĞ´Ğ¿Ñ€Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€ Ğ² Ğ½Ğ¾Ğ²Ğ¾Ğ¼ Ğ¾ĞºĞ½Ğµ
      const blob = new Blob([html.replace('</head>', `<style>${css}</style></head>`)], { type: 'text/html;charset=utf-8' });
      const url = URL.createObjectURL(blob);
      window.open(url, '_blank');
      status.textContent = 'Ğ“Ğ¾Ñ‚Ğ¾Ğ²Ğ¾: Ğ¿Ñ€ĞµĞ´Ğ¿Ñ€Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€ Ğ¾Ñ‚ĞºÑ€Ñ‹Ñ‚.';
    } catch (e) {
      console.error(e);
      status.textContent = 'ĞÑˆĞ¸Ğ±ĞºĞ° Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸ (ÑĞ¼. ĞºĞ¾Ğ½ÑĞ¾Ğ»ÑŒ).';
    }
  }

  async function exportZip() {
    status.textContent = 'Ğ¡Ğ¾Ğ±Ğ¸Ñ€Ğ°Ñ ZIP...';

    // Ğ˜Ğ¼Ğ¿Ğ¾Ñ€Ñ‚Ğ¸Ñ€ÑƒĞµĞ¼ JSZip Ğ´Ğ¸Ğ½Ğ°Ğ¼Ğ¸Ñ‡ĞµÑĞºĞ¸ (Ğ´Ğ¾Ğ±Ğ°Ğ²ÑŒ jszip Ğ² Ğ¿Ñ€Ğ¾ĞµĞºÑ‚ Ğ¿Ñ€Ğ¸ Ğ½ĞµĞ¾Ğ±Ñ…Ğ¾Ğ´Ğ¸Ğ¼Ğ¾ÑÑ‚Ğ¸)
    const JSZip = (await import('https://cdn.jsdelivr.net/npm/jszip@3.10.1/+esm')).default;

    const prompt = panel.querySelector('#aiPrompt').value.trim();
    const { html, css } = await designer.generateOffline(prompt || 'hero, 3 cards, contact form, dark');

    const zip = new JSZip();
    zip.file('index.html', html.replace('</head>', `<link rel="stylesheet" href="styles.css"></head>`));
    zip.file('styles.css', css || '/* styles */');

    const blob = await zip.generateAsync({ type: 'blob' });
    const url = URL.createObjectURL(blob);

    const a = document.createElement('a');
    a.href = url;
    a.download = 'webkurier_autobuild.zip';
    a.click();
    URL.revokeObjectURL(url);

    status.textContent = 'ZIP Ğ³Ğ¾Ñ‚Ğ¾Ğ².';
  }

  panel.querySelector('#btnGen').addEventListener('click', generate);
  panel.querySelector('#btnZip').addEventListener('click', exportZip);
</script>
</body>
</html>